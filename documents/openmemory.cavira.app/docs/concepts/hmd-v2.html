<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>HMD v2 (HSG) Specification - OpenMemory Documentation</title><meta name="title" content="HMD v2 (HSG) Specification - OpenMemory Documentation"/><meta name="description" content="OpenMemory&#x27;s Hierarchical Semantic Graph with tiered decay and adaptive compression"/><link rel="canonical" href="https://openmemory.ai/docs/concepts/hmd-v2"/><meta property="og:type" content="article"/><meta property="og:url" content="https://openmemory.ai/docs/concepts/hmd-v2"/><meta property="og:title" content="HMD v2 (HSG) Specification - OpenMemory Documentation"/><meta property="og:description" content="OpenMemory&#x27;s Hierarchical Semantic Graph with tiered decay and adaptive compression"/><meta property="og:image" content="https://openmemory.ai/og-docs.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:site_name" content="OpenMemory"/><meta property="og:locale" content="en_US"/><meta property="article:published_time" content="2025-11-29T09:26:19.132Z"/><meta property="article:modified_time" content="2025-11-29T09:26:19.132Z"/><meta property="article:author" content="OpenMemory Team"/><meta property="article:section" content="Concepts"/><meta property="article:tag" content="concepts"/><meta property="article:tag" content="hmd v2"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:url" content="https://openmemory.ai/docs/concepts/hmd-v2"/><meta name="twitter:title" content="HMD v2 (HSG) Specification - OpenMemory Documentation"/><meta name="twitter:description" content="OpenMemory&#x27;s Hierarchical Semantic Graph with tiered decay and adaptive compression"/><meta name="twitter:image" content="https://openmemory.ai/og-docs.png"/><meta name="twitter:creator" content="@openmemory"/><meta name="twitter:site" content="@openmemory"/><meta name="keywords" content="AI memory, long-term memory, AI agents, vector database, embeddings, hierarchical memory, RAG, retrieval augmented generation, semantic search, knowledge graph, autonomous agents, LLM memory, chatbot memory"/><meta name="author" content="OpenMemory Team"/><meta name="publisher" content="OpenMemory"/><meta name="language" content="English"/><meta name="revisit-after" content="7 days"/><meta name="distribution" content="global"/><meta name="rating" content="general"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0"/><meta name="format-detection" content="telephone=no"/><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://openmemory.ai"},{"@type":"ListItem","position":2,"name":"Documentation","item":"https://openmemory.ai/docs"},{"@type":"ListItem","position":3,"name":"Concepts","item":"https://openmemory.ai/docs/concepts"},{"@type":"ListItem","position":4,"name":"Hmd v2","item":"https://openmemory.ai/docs/concepts/hmd-v2"}]},{"@context":"https://schema.org","@type":"TechnicalArticle","headline":"HMD v2 (HSG) Specification","description":"OpenMemory's Hierarchical Semantic Graph with tiered decay and adaptive compression","author":{"@type":"Person","name":"OpenMemory Team"},"datePublished":"2025-11-29T09:26:19.132Z","dateModified":"2025-11-29T09:26:19.132Z","image":"https://openmemory.ai/og-image.png","url":"https://openmemory.ai/docs/concepts/hmd-v2","publisher":{"@type":"Organization","name":"OpenMemory","logo":{"@type":"ImageObject","url":"https://openmemory.ai/logo.png"}}}]}</script><meta name="next-head-count" content="37"/><link rel="icon" href="../../icon.png"/><link rel="apple-touch-icon" href="../../icon.png"/><link rel="icon" type="image/png" sizes="192x192" href="../../icon.png"/><link rel="icon" type="image/png" sizes="512x512" href="../../icon.png"/><link rel="manifest" href="../../site.webmanifest"/><meta name="google-site-verification" content="Pd534PQ2aWGfjUWL8bOIeM6KQr0QwLmQYR4OOWUECzI"/><meta name="theme-color" content="#8b5cf6"/><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/><meta name="googlebot" content="index, follow"/><meta name="bingbot" content="index, follow"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="canonical" href="https://openmemory.ai"/><link rel="preload" href="../../_next/static/css/98c4e29684169509.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/98c4e29684169509.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="../../_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="../../_next/static/chunks/webpack-6ef43a8d4a395f49.js" defer=""></script><script src="../../_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="../../_next/static/chunks/main-a2464d6d00b134e7.js" defer=""></script><script src="../../_next/static/chunks/pages/_app-3023ec3bb8a608f5.js" defer=""></script><script src="../../_next/static/chunks/996-1b55609011aad234.js" defer=""></script><script src="../../_next/static/chunks/pages/docs/[...slug]-8c5e687d752382af.js" defer=""></script><script src="../../_next/static/B4NA5nCGTllebOHsFva8z/_buildManifest.js" defer=""></script><script src="../../_next/static/B4NA5nCGTllebOHsFva8z/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-black text-gray-100"><div class="bg-gradient-radial"></div><header class="sticky top-0 z-50 navbar-glass"><div class="container mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between"><a class="flex items-center space-x-2.5 group" href="https://openmemory.cavira.app/"><span class="text-lg font-semibold text-white">OpenMemory</span></a><nav class="hidden md:flex items-center space-x-1"><a class="px-3 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors rounded-md hover:bg-white/3" href="https://openmemory.cavira.app/">Home</a><a class="px-3 py-2 text-sm font-medium text-primary-400 transition-colors rounded-md" href="../introduction.html">Docs</a><a href="https://github.com/caviraoss/openmemory" target="_blank" rel="noopener noreferrer" class="ml-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white text-sm font-medium rounded-lg transition-colors">GitHub</a></nav></div></header><div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10"><div class="flex gap-8 lg:gap-12"><aside class="hidden lg:block w-64 flex-shrink-0 sticky top-20 h-[calc(100vh-5rem)] overflow-y-auto py-8 pr-4"><nav class="space-y-8"><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Introduction</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../introduction.html">What is OpenMemory</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../standalone.html">Standalone vs Backend</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Getting Started</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../installation.html">Install</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../quick-start.html">Quick Start (Standalone)</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../quick-start-backend.html">Quick Start (Backend)</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">SDKs</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../sdks/javascript.html">JavaScript</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../sdks/python.html">Python</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">API Reference</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../api/routes.html">API Routes</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../api/add-memory.html">Add Memory</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../api/query.html">Query Memory</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Core Concepts</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="sectors.html">Sectors</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="decay.html">Decay</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="salience.html">Salience</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="associations.html">Associations</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="temporal-graph.html">Temporal Graph</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Advanced</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../advanced/embedding-modes.html">Embeddings</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../advanced/ingestion.html">Ingestion</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../integrations/mcp.html">MCP Server</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../advanced/langgraph.html">LangGraph Mode</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Examples</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../examples/agents.html">Agents</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../examples/claude.html">Claude Desktop</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../examples/python-chatbot.html">Python Chatbot</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../examples/nodejs-assistant.html">Node.js Assistant</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Deployment</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../deployment/backend.html">Backend Setup</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../deployment/docker.html">Docker</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../deployment/cloud.html">Vercel / Railway</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Migration</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../migration/mem0.html">From Mem0</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../migration/supermemory.html">From Supermemory</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../migration/zep.html">From Zep</a></li></ul></div></nav></aside><main class="flex-1 min-w-0 py-8 max-w-4xl"><article class="prose prose-lg max-w-none"><div class="p-8 lg:p-12 rounded-2xl"><div class="mb-8 pb-6 border-b border-dark-700"><h1 class="text-4xl md:text-5xl font-bold text-gray-50 mb-4 tracking-tight">HMD v2 (HSG) Specification</h1><p class="text-lg text-gray-400 leading-relaxed">OpenMemory&#x27;s Hierarchical Semantic Graph with tiered decay and adaptive compression</p></div><h1 class="text-4xl md:text-5xl font-bold mb-6 text-gray-50 tracking-tight">HMD v2 (HSG) Specification</h1>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Hierarchical Memory Decay version 2</strong> implements a <strong>Hierarchical Semantic Graph (HSG)</strong> architecture with tiered decay, adaptive compression, and automatic regeneration.</p>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Overview</h2>
<p class="mb-5 text-gray-300 leading-relaxed">HMD v2 differs from traditional caching and memory systems by:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><strong>Three-tier classification</strong> (hot/warm/cold) based on recency and activity</li>
<li class="text-gray-300 leading-relaxed"><strong>Adaptive vector compression</strong> preserving semantic meaning while reducing storage</li>
<li class="text-gray-300 leading-relaxed"><strong>Fingerprinting</strong> for cold memories with automatic regeneration</li>
<li class="text-gray-300 leading-relaxed"><strong>Brain-inspired sectors</strong> with sector-specific decay characteristics</li>
<li class="text-gray-300 leading-relaxed"><strong>Coactivation tracking</strong> to boost frequently accessed memories</li>
</ul>
<p class="mb-5 text-gray-300 leading-relaxed">This creates a memory system that mimics human cognition: recent and important memories remain vivid, while old memories compress but stay retrievable.</p>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Core Architecture</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Tiered Memory States</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">┌─────────────────────────────────────────────────┐
│  HOT (λ=0.005)                                  │
│  • Recent + High activity                       │
│  • Full resolution vectors                      │
│  • No compression                               │
│  • Criteria: &lt;6 days AND (coact&gt;5 OR sal&gt;0.7)  │
└─────────────────────────────────────────────────┘
           ↓ (aging or low activity)
┌─────────────────────────────────────────────────┐
│  WARM (λ=0.02)                                  │
│  • Recent OR moderate salience                  │
│  • Compressed when f&lt;0.7                        │
│  • Accessible with minimal latency              │
│  • Criteria: &lt;6 days OR sal&gt;0.4                 │
└─────────────────────────────────────────────────┘
           ↓ (continued inactivity)
┌─────────────────────────────────────────────────┐
│  COLD (λ=0.05)                                  │
│  • Old + low salience                           │
│  • Heavy compression or fingerprinting          │
│  • Regenerates on access                        │
│  • Criteria: Not hot/warm                       │
└─────────────────────────────────────────────────┘
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">HSG Tier Configuration</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Memory storage tier affects maximum vector dimensions:</p>
<div class="overflow-x-auto mb-6 rounded-lg border border-dark-700"><table class="min-w-full divide-y divide-dark-700"><thead class="bg-dark-800/30"><tr class="hover:bg-dark-800/30"><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Tier</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Dimensions</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Cache</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Max Active</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Features</th></tr></thead><tbody class="divide-y divide-dark-700"><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Fast</td><td class="px-4 py-3 text-sm text-gray-300">256</td><td class="px-4 py-3 text-sm text-gray-300">2 seg</td><td class="px-4 py-3 text-sm text-gray-300">32</td><td class="px-4 py-3 text-sm text-gray-300">Speed-optimized</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Smart</td><td class="px-4 py-3 text-sm text-gray-300">384</td><td class="px-4 py-3 text-sm text-gray-300">3 seg</td><td class="px-4 py-3 text-sm text-gray-300">64</td><td class="px-4 py-3 text-sm text-gray-300">Balanced</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Deep</td><td class="px-4 py-3 text-sm text-gray-300">1536</td><td class="px-4 py-3 text-sm text-gray-300">5 seg</td><td class="px-4 py-3 text-sm text-gray-300">128</td><td class="px-4 py-3 text-sm text-gray-300">High accuracy</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Hybrid</td><td class="px-4 py-3 text-sm text-gray-300">256 + BM25</td><td class="px-4 py-3 text-sm text-gray-300">3 seg</td><td class="px-4 py-3 text-sm text-gray-300">64</td><td class="px-4 py-3 text-sm text-gray-300">Semantic + keyword</td></tr></tbody></table></div>
<p class="mb-5 text-gray-300 leading-relaxed">Set via environment variable:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash">OM_TIER=hybrid  <span class="hljs-comment"># Recommended default</span>
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Mathematical Model</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Tier Classification</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">classify_tier</span>(<span class="hljs-params">memory, now_ts</span>): <span class="hljs-string">&#x27;hot&#x27;</span> | <span class="hljs-string">&#x27;warm&#x27;</span> | <span class="hljs-string">&#x27;cold&#x27;</span> {
  <span class="hljs-keyword">const</span> dt = now_ts - memory.<span class="hljs-property">last_seen_at</span>
  <span class="hljs-keyword">const</span> recent = dt &lt; 6_days
  <span class="hljs-keyword">const</span> high = memory.<span class="hljs-property">coactivations</span> &gt; <span class="hljs-number">5</span> || memory.<span class="hljs-property">salience</span> &gt; <span class="hljs-number">0.7</span>

  <span class="hljs-keyword">if</span> (recent &amp;&amp; high) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;hot&#x27;</span>
  <span class="hljs-keyword">if</span> (recent || memory.<span class="hljs-property">salience</span> &gt; <span class="hljs-number">0.4</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;warm&#x27;</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;cold&#x27;</span>
}
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Decay Formula</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">f = exp(-λ × dt / (salience + 0.1))
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Where:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">λ</code> = Tier decay constant (0.005 hot, 0.02 warm, 0.05 cold)</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">dt</code> = Days elapsed since last access</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">salience</code> = Current strength, boosted by coactivations</li>
</ul>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Salience Calculation</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">boosted_salience = clamp(
  base_salience × (1 + ln(1 + coactivations)),
  0,
  1
)
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Logarithmic coactivation boost prevents unbounded growth while rewarding access.</p>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">New Salience After Decay</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">new_salience = clamp(salience × f, 0, 1)
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Compression Target Dimensions</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">target_dim = floor(original_dim × f)
target_dim = clamp(target_dim, min_vec_dim, max_vec_dim)
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Defaults:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">min_vec_dim</code> = 64 (configurable via <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_MIN_VECTOR_DIM</code>)</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">max_vec_dim</code> = 256/384/1536 (based on <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_TIER</code>)</li>
</ul>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Implementation Details</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Memory Structure</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">HSGMemory</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">summary</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">primary_sector</span>:
    | <span class="hljs-string">&quot;episodic&quot;</span>
    | <span class="hljs-string">&quot;semantic&quot;</span>
    | <span class="hljs-string">&quot;procedural&quot;</span>
    | <span class="hljs-string">&quot;emotional&quot;</span>
    | <span class="hljs-string">&quot;reflective&quot;</span>;
  <span class="hljs-attr">sectors</span>: <span class="hljs-built_in">string</span>[];
  <span class="hljs-attr">salience</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// 0.0-1.0</span>
  <span class="hljs-attr">decay_lambda</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Sector-specific</span>
  <span class="hljs-attr">coactivations</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Access count</span>
  <span class="hljs-attr">last_seen_at</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Timestamp</span>
  <span class="hljs-attr">created_at</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">updated_at</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">HSGVector</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">sector</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">vector</span>: <span class="hljs-built_in">number</span>[]; <span class="hljs-comment">// Adaptive dimensions</span>
}
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Brain Sector Integration</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Each sector has specialized decay characteristics:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">const</span> sector_configs = {
  <span class="hljs-attr">episodic</span>: {
    <span class="hljs-attr">decay_lambda</span>: <span class="hljs-number">0.015</span>, <span class="hljs-comment">// Medium-fast (events fade)</span>
    <span class="hljs-attr">weight</span>: <span class="hljs-number">1.2</span>, <span class="hljs-comment">// Boosted importance</span>
  },
  <span class="hljs-attr">semantic</span>: {
    <span class="hljs-attr">decay_lambda</span>: <span class="hljs-number">0.005</span>, <span class="hljs-comment">// Very slow (facts persist)</span>
    <span class="hljs-attr">weight</span>: <span class="hljs-number">1.0</span>, <span class="hljs-comment">// Standard</span>
  },
  <span class="hljs-attr">procedural</span>: {
    <span class="hljs-attr">decay_lambda</span>: <span class="hljs-number">0.008</span>, <span class="hljs-comment">// Slow (habits stable)</span>
    <span class="hljs-attr">weight</span>: <span class="hljs-number">1.1</span>, <span class="hljs-comment">// Slightly boosted</span>
  },
  <span class="hljs-attr">emotional</span>: {
    <span class="hljs-attr">decay_lambda</span>: <span class="hljs-number">0.02</span>, <span class="hljs-comment">// Fast (emotions fade quickly)</span>
    <span class="hljs-attr">weight</span>: <span class="hljs-number">1.3</span>, <span class="hljs-comment">// Highly boosted</span>
  },
  <span class="hljs-attr">reflective</span>: {
    <span class="hljs-attr">decay_lambda</span>: <span class="hljs-number">0.001</span>, <span class="hljs-comment">// Extremely slow (learnings persist)</span>
    <span class="hljs-attr">weight</span>: <span class="hljs-number">0.8</span>, <span class="hljs-comment">// Background context</span>
  },
};
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">See <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="sectors.html">Brain Sectors</a> for detailed sector information.</p>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Compression Algorithm</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">compress_vector</span>(<span class="hljs-params">
  <span class="hljs-attr">vec</span>: <span class="hljs-built_in">number</span>[],
  <span class="hljs-attr">f</span>: <span class="hljs-built_in">number</span>,
  <span class="hljs-attr">min_dim</span>: <span class="hljs-built_in">number</span>,
  <span class="hljs-attr">max_dim</span>: <span class="hljs-built_in">number</span>
</span>): <span class="hljs-built_in">number</span>[] {
  <span class="hljs-keyword">const</span> target_dim = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(vec.<span class="hljs-property">length</span> * f);
  <span class="hljs-keyword">const</span> dim = <span class="hljs-title function_">clamp</span>(target_dim, min_dim, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(max_dim, vec.<span class="hljs-property">length</span>));

  <span class="hljs-keyword">if</span> (dim &gt;= vec.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> vec;

  <span class="hljs-comment">// Pooling-based compression</span>
  <span class="hljs-keyword">const</span> bucket_size = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(vec.<span class="hljs-property">length</span> / dim);
  <span class="hljs-keyword">const</span> compressed = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; vec.<span class="hljs-property">length</span>; i += bucket_size) {
    <span class="hljs-keyword">const</span> bucket = vec.<span class="hljs-title function_">slice</span>(i, i + bucket_size);
    compressed.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">mean</span>(bucket));
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">normalize</span>(compressed);
}
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Example Compression Path</strong>:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">1536d (f=1.0) → 1075d (f=0.7) → 614d (f=0.4) → 307d (f=0.2) → 64d (min)
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Summary Compression</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">compress_summary</span>(<span class="hljs-params">
  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">f</span>: <span class="hljs-built_in">number</span>,
  <span class="hljs-attr">layers</span>: <span class="hljs-built_in">number</span>
</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">if</span> (f &gt; <span class="hljs-number">0.8</span>) {
    <span class="hljs-comment">// Light: truncate to 200 chars</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">truncate</span>(text, <span class="hljs-number">200</span>)
  }
  <span class="hljs-keyword">if</span> (f &gt; <span class="hljs-number">0.4</span>) {
    <span class="hljs-comment">// Medium: extractive summary</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">summarize_quick</span>(text, <span class="hljs-attr">max_length</span>: <span class="hljs-number">80</span>)
  }
  <span class="hljs-comment">// Heavy: keywords only</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">top_keywords</span>(text, <span class="hljs-attr">count</span>: <span class="hljs-number">5</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27; &#x27;</span>)
}
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Fingerprinting</h3>
<p class="mb-5 text-gray-300 leading-relaxed">When <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">f &lt; cold_threshold</code> (default 0.25):</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fingerprint_memory</span>(<span class="hljs-params"><span class="hljs-attr">memory</span>: <span class="hljs-title class_">HSGMemory</span></span>): <span class="hljs-title class_">Fingerprint</span> {
  <span class="hljs-comment">// Create deterministic hash vector</span>
  <span class="hljs-keyword">const</span> hash_input = memory.<span class="hljs-property">id</span> + <span class="hljs-string">&quot;|&quot;</span> + memory.<span class="hljs-property">summary</span>;
  <span class="hljs-keyword">const</span> fingerprint_vec = <span class="hljs-title function_">hash_to_vec</span>(hash_input, <span class="hljs-number">32</span>); <span class="hljs-comment">// 32 dimensions</span>

  <span class="hljs-comment">// Extract top keywords</span>
  <span class="hljs-keyword">const</span> keywords = <span class="hljs-title function_">top_keywords</span>(memory.<span class="hljs-property">content</span>, <span class="hljs-number">3</span>);
  <span class="hljs-keyword">const</span> fingerprint_summary = keywords.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot; &quot;</span>);

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">vector</span>: <span class="hljs-title function_">normalize</span>(fingerprint_vec),
    <span class="hljs-attr">summary</span>: fingerprint_summary,
  };
}
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Fingerprinted memories:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Use ~95% less storage</li>
<li class="text-gray-300 leading-relaxed">Still searchable via keywords</li>
<li class="text-gray-300 leading-relaxed">Automatically regenerate when accessed</li>
</ul>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Decay Process</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Periodic Execution</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-comment">// Runs every OM_DECAY_INTERVAL_MINUTES (default: 1440 = 24 hours)</span>
<span class="hljs-comment">// Skips if:</span>
<span class="hljs-comment">// - Active queries running (active_q &gt; 0)</span>
<span class="hljs-comment">// - Cooldown period not elapsed (&lt;60s since last decay)</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">apply_decay</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> segment <span class="hljs-keyword">of</span> memory_segments) {
    <span class="hljs-comment">// Process batch (OM_DECAY_RATIO × segment_size)</span>
    <span class="hljs-keyword">const</span> batch = <span class="hljs-title function_">select_random_batch</span>(segment, <span class="hljs-attr">ratio</span>: <span class="hljs-number">0.03</span>)

    <span class="hljs-comment">// Parallel processing across threads</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">parallelize</span>(batch, <span class="hljs-attr">threads</span>: <span class="hljs-variable constant_">OM_DECAY_THREADS</span>)
  }
}
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Per-Memory Decay Steps</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> memory <span class="hljs-keyword">of</span> batch) {
  <span class="hljs-comment">// 1. Classify tier</span>
  <span class="hljs-keyword">const</span> tier = <span class="hljs-title function_">classify_tier</span>(memory, now)

  <span class="hljs-comment">// 2. Get tier-specific lambda</span>
  <span class="hljs-keyword">const</span> λ = tier === <span class="hljs-string">&#x27;hot&#x27;</span> ? <span class="hljs-number">0.005</span> : tier === <span class="hljs-string">&#x27;warm&#x27;</span> ? <span class="hljs-number">0.02</span> : <span class="hljs-number">0.05</span>

  <span class="hljs-comment">// 3. Calculate decay factor</span>
  <span class="hljs-keyword">const</span> dt = <span class="hljs-title function_">days_since</span>(memory.<span class="hljs-property">last_seen_at</span>)
  <span class="hljs-keyword">const</span> boosted_sal = memory.<span class="hljs-property">salience</span> × (<span class="hljs-number">1</span> + <span class="hljs-title function_">ln</span>(<span class="hljs-number">1</span> + memory.<span class="hljs-property">coactivations</span>))
  <span class="hljs-keyword">const</span> f = <span class="hljs-title function_">exp</span>(-λ × dt / (boosted_sal + <span class="hljs-number">0.1</span>))

  <span class="hljs-comment">// 4. Apply salience decay</span>
  <span class="hljs-keyword">const</span> new_salience = <span class="hljs-title function_">clamp</span>(boosted_sal × f, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)

  <span class="hljs-comment">// 5. Compress if needed (f &lt; 0.7)</span>
  <span class="hljs-keyword">if</span> (f &lt; <span class="hljs-number">0.7</span>) {
    <span class="hljs-keyword">const</span> new_vec = <span class="hljs-title function_">compress_vector</span>(memory.<span class="hljs-property">vector</span>, f)
    <span class="hljs-keyword">const</span> new_summary = <span class="hljs-title function_">compress_summary</span>(memory.<span class="hljs-property">summary</span>, f)
    <span class="hljs-title function_">update_vector</span>(memory.<span class="hljs-property">id</span>, new_vec)
    <span class="hljs-title function_">update_summary</span>(memory.<span class="hljs-property">id</span>, new_summary)
  }

  <span class="hljs-comment">// 6. Fingerprint if very cold (f &lt; cold_threshold)</span>
  <span class="hljs-keyword">if</span> (f &lt; <span class="hljs-number">0.25</span>) {
    <span class="hljs-keyword">const</span> fp = <span class="hljs-title function_">fingerprint_memory</span>(memory)
    <span class="hljs-title function_">update_vector</span>(memory.<span class="hljs-property">id</span>, fp.<span class="hljs-property">vector</span>)  <span class="hljs-comment">// 32d fingerprint</span>
    <span class="hljs-title function_">update_summary</span>(memory.<span class="hljs-property">id</span>, fp.<span class="hljs-property">summary</span>)  <span class="hljs-comment">// Keywords only</span>
  }

  <span class="hljs-comment">// 7. Update salience</span>
  <span class="hljs-title function_">update_salience</span>(memory.<span class="hljs-property">id</span>, new_salience)
}
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Batch Processing Strategy</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-comment">// Stochastic sampling prevents processing same memories repeatedly</span>
<span class="hljs-keyword">const</span> batch_size = <span class="hljs-title function_">floor</span>(segment_size × <span class="hljs-variable constant_">OM_DECAY_RATIO</span>)
<span class="hljs-keyword">const</span> random_start = <span class="hljs-title function_">random</span>(<span class="hljs-number">0</span>, segment_size - batch_size)
<span class="hljs-keyword">const</span> batch = memories.<span class="hljs-title function_">slice</span>(random_start, random_start + batch_size)

<span class="hljs-comment">// Distribute across threads for parallelization</span>
<span class="hljs-keyword">const</span> threads = <span class="hljs-variable constant_">OM_DECAY_THREADS</span>  <span class="hljs-comment">// default: 3</span>
<span class="hljs-keyword">const</span> chunks = <span class="hljs-title function_">chunkify</span>(batch, threads)

<span class="hljs-comment">// Process in parallel</span>
<span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(chunks.<span class="hljs-title function_">map</span>(process_chunk))

<span class="hljs-comment">// Sleep between segments to avoid overwhelming system</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-variable constant_">OM_DECAY_SLEEP_MS</span>)  <span class="hljs-comment">// default: 200ms</span>
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Regeneration on Access</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Automatic Regeneration</h3>
<p class="mb-5 text-gray-300 leading-relaxed">When a fingerprinted memory is queried:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">on_query_hit</span>(<span class="hljs-params">
  <span class="hljs-attr">memory_id</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">sector</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">reembed</span>: (text: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>[]&gt;
</span>) {
  <span class="hljs-keyword">const</span> memory = <span class="hljs-keyword">await</span> <span class="hljs-title function_">get_memory</span>(memory_id);
  <span class="hljs-keyword">const</span> vector = <span class="hljs-keyword">await</span> <span class="hljs-title function_">get_vector</span>(memory_id, sector);

  <span class="hljs-comment">// Check if fingerprinted (≤64 dimensions)</span>
  <span class="hljs-keyword">if</span> (vector.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">64</span>) {
    <span class="hljs-comment">// Regenerate full embedding</span>
    <span class="hljs-keyword">const</span> original_text = memory.<span class="hljs-property">summary</span> || memory.<span class="hljs-property">content</span>;
    <span class="hljs-keyword">const</span> new_vector = <span class="hljs-keyword">await</span> <span class="hljs-title function_">reembed</span>(original_text);

    <span class="hljs-comment">// Replace fingerprint with full vector</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">update_vector</span>(memory_id, sector, new_vector);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[hsg] regenerated memory <span class="hljs-subst">${memory_id}</span>`</span>);
  }

  <span class="hljs-comment">// Reinforce salience</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">OM_DECAY_REINFORCE_ON_QUERY</span>) {
    <span class="hljs-keyword">const</span> new_salience = <span class="hljs-title function_">clamp</span>(memory.<span class="hljs-property">salience</span> + <span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">update_salience</span>(memory_id, new_salience);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">update_last_seen</span>(memory_id, <span class="hljs-title function_">now</span>());
  }
}
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Reinforce-on-Query</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-comment">// Enabled by default (OM_DECAY_REINFORCE_ON_QUERY=true)</span>
<span class="hljs-comment">// Prevents useful memories from fading</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">reinforce_on_query</span>(<span class="hljs-params"><span class="hljs-attr">memory</span>: <span class="hljs-title class_">HSGMemory</span></span>) {
  <span class="hljs-comment">// Significant boost to salience</span>
  memory.<span class="hljs-property">salience</span> = <span class="hljs-title function_">min</span>(<span class="hljs-number">1.0</span>, memory.<span class="hljs-property">salience</span> + <span class="hljs-number">0.5</span>);

  <span class="hljs-comment">// Update access tracking</span>
  memory.<span class="hljs-property">last_seen_at</span> = <span class="hljs-title function_">now</span>();
  memory.<span class="hljs-property">coactivations</span>++;

  <span class="hljs-comment">// Effect: Memory likely moves to hot/warm tier</span>
}
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Configuration</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Environment Variables</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Tier system (affects max vector dimensions)</span>
OM_TIER=hybrid  <span class="hljs-comment"># fast=256d, smart=384d, deep=1536d, hybrid=256d+BM25</span>

<span class="hljs-comment"># Decay behavior</span>
OM_DECAY_THREADS=3  <span class="hljs-comment"># Parallel processing threads</span>
OM_DECAY_RATIO=0.03  <span class="hljs-comment"># Portion of memories to decay per cycle (3%)</span>
OM_DECAY_SLEEP_MS=200  <span class="hljs-comment"># Sleep between segment processing</span>
OM_DECAY_COLD_THRESHOLD=0.25  <span class="hljs-comment"># Fingerprint threshold</span>

<span class="hljs-comment"># Compression limits</span>
OM_MAX_VECTOR_DIM=1536  <span class="hljs-comment"># Maximum dimensions (set by tier)</span>
OM_MIN_VECTOR_DIM=64  <span class="hljs-comment"># Minimum dimensions after compression</span>
OM_SUMMARY_LAYERS=3  <span class="hljs-comment"># Summary compression layers (1-3)</span>

<span class="hljs-comment"># Regeneration and reinforcement</span>
OM_DECAY_REINFORCE_ON_QUERY=<span class="hljs-literal">true</span>  <span class="hljs-comment"># Auto-reinforce matched memories</span>
OM_REGENERATION_ENABLED=<span class="hljs-literal">true</span>  <span class="hljs-comment"># Regenerate fingerprinted memories</span>

<span class="hljs-comment"># Decay interval</span>
OM_DECAY_INTERVAL_MINUTES=1440  <span class="hljs-comment"># Run decay every 24 hours</span>
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">See <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="../advanced/environment-variables.html">Environment Variables</a> for complete reference.</p>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Sector-Specific Configuration</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Sectors are configured in <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">models.yml</code>:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-yaml"><span class="hljs-attr">episodic:</span>
  <span class="hljs-attr">ollama:</span> <span class="hljs-string">nomic-embed-text</span>
  <span class="hljs-attr">openai:</span> <span class="hljs-string">text-embedding-3-small</span>
  <span class="hljs-attr">gemini:</span> <span class="hljs-string">models/embedding-001</span>

<span class="hljs-attr">semantic:</span>
  <span class="hljs-attr">ollama:</span> <span class="hljs-string">nomic-embed-text</span>
  <span class="hljs-attr">openai:</span> <span class="hljs-string">text-embedding-3-small</span>
  <span class="hljs-attr">gemini:</span> <span class="hljs-string">models/embedding-001</span>
<span class="hljs-comment"># ... procedural, emotional, reflective</span>
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Each sector has hardcoded decay lambda in the implementation:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">episodic</code>: λ = 0.015</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">semantic</code>: λ = 0.005</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">procedural</code>: λ = 0.008</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">emotional</code>: λ = 0.020</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">reflective</code>: λ = 0.001</li>
</ul>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Performance Characteristics</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Storage Efficiency</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Compression dramatically reduces storage requirements:</p>
<div class="overflow-x-auto mb-6 rounded-lg border border-dark-700"><table class="min-w-full divide-y divide-dark-700"><thead class="bg-dark-800/30"><tr class="hover:bg-dark-800/30"><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">State</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Vector Dims</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Summary Length</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Storage vs Hot</th></tr></thead><tbody class="divide-y divide-dark-700"><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Hot (full)</td><td class="px-4 py-3 text-sm text-gray-300">1536d</td><td class="px-4 py-3 text-sm text-gray-300">Full text</td><td class="px-4 py-3 text-sm text-gray-300">100%</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Warm (partial)</td><td class="px-4 py-3 text-sm text-gray-300">1075d</td><td class="px-4 py-3 text-sm text-gray-300">Summarized</td><td class="px-4 py-3 text-sm text-gray-300">~70%</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Warm (more)</td><td class="px-4 py-3 text-sm text-gray-300">614d</td><td class="px-4 py-3 text-sm text-gray-300">Keywords+</td><td class="px-4 py-3 text-sm text-gray-300">~40%</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Cold (heavy)</td><td class="px-4 py-3 text-sm text-gray-300">307d</td><td class="px-4 py-3 text-sm text-gray-300">Keywords</td><td class="px-4 py-3 text-sm text-gray-300">~20%</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Cold (minimal)</td><td class="px-4 py-3 text-sm text-gray-300">64d</td><td class="px-4 py-3 text-sm text-gray-300">3-5 keywords</td><td class="px-4 py-3 text-sm text-gray-300">~5%</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Fingerprinted</td><td class="px-4 py-3 text-sm text-gray-300">32d</td><td class="px-4 py-3 text-sm text-gray-300">3 keywords</td><td class="px-4 py-3 text-sm text-gray-300">~2%</td></tr></tbody></table></div>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Example</strong>: 100,000 memories at 1536d = 100K memories</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">All hot: ~600MB vector storage</li>
<li class="text-gray-300 leading-relaxed">50% fingerprinted: ~300MB (50% savings)</li>
<li class="text-gray-300 leading-relaxed">80% fingerprinted: ~120MB (80% savings)</li>
</ul>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Query Performance</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Tier distribution affects query speed:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">Hot memories:  &lt;1ms retrieval (full vectors, cached)
Warm memories: 1-5ms retrieval (compressed but loaded)
Cold memories: 5-10ms retrieval (heavily compressed)
Fingerprinted: 10-50ms if matched (requires regeneration)
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Optimization</strong>: Frequently queried memories naturally migrate to hot tier through reinforcement.</p>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Memory Distribution</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Healthy distribution example for knowledge base:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">Hot:   15% (recently accessed, high activity)
Warm:  45% (moderately recent or important)
Cold:  40% (archived but retrievable)
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Adjust <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_DECAY_COLD_THRESHOLD</code> to shift distribution:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Lower threshold (0.15): More hot/warm, less aggressive</li>
<li class="text-gray-300 leading-relaxed">Higher threshold (0.35): More cold/fingerprinted, more aggressive</li>
</ul>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Advanced Features</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Waypoints and Graph Structure</h3>
<p class="mb-5 text-gray-300 leading-relaxed">HSG maintains semantic connections between memories:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Waypoint</span> {
  <span class="hljs-attr">src_id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">dst_id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">weight</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// Semantic similarity</span>
  <span class="hljs-attr">created_at</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">updated_at</span>: <span class="hljs-built_in">number</span>;
}
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Waypoints enable:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Cross-sector memory navigation</li>
<li class="text-gray-300 leading-relaxed">Related memory discovery</li>
<li class="text-gray-300 leading-relaxed">Context-aware retrieval</li>
<li class="text-gray-300 leading-relaxed">Graph-based reasoning</li>
</ul>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Coactivation Tracking</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Memories accessed together strengthen their connection:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">track_coactivation</span>(<span class="hljs-params"><span class="hljs-attr">memory_ids</span>: <span class="hljs-built_in">string</span>[]</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> id <span class="hljs-keyword">of</span> memory_ids) {
    memory.<span class="hljs-property">coactivations</span>++

    <span class="hljs-comment">// Boost salience via logarithmic scaling</span>
    memory.<span class="hljs-property">salience</span> = <span class="hljs-title function_">clamp</span>(
      memory.<span class="hljs-property">salience</span> × (<span class="hljs-number">1</span> + <span class="hljs-title function_">ln</span>(<span class="hljs-number">1</span> + memory.<span class="hljs-property">coactivations</span>)),
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    )
  }
}
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">High coactivation count:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Pushes memory toward hot tier</li>
<li class="text-gray-300 leading-relaxed">Slows decay rate</li>
<li class="text-gray-300 leading-relaxed">Increases query relevance</li>
</ul>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Query-Time Scoring</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Memory relevance combines multiple factors:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">calculate_score</span>(<span class="hljs-params">
  <span class="hljs-attr">memory</span>: <span class="hljs-title class_">HSGMemory</span>,
  <span class="hljs-attr">query_vec</span>: <span class="hljs-built_in">number</span>[],
  <span class="hljs-attr">sector_weight</span>: <span class="hljs-built_in">number</span>
</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-comment">// Semantic similarity</span>
  <span class="hljs-keyword">const</span> similarity = <span class="hljs-title function_">cosine_similarity</span>(memory.<span class="hljs-property">vector</span>, query_vec)

  <span class="hljs-comment">// Sector-specific weight (emotional=1.3, reflective=0.8, etc.)</span>
  <span class="hljs-keyword">const</span> weighted_sim = similarity × sector_weight

  <span class="hljs-comment">// Salience boost</span>
  <span class="hljs-keyword">const</span> salience_factor = memory.<span class="hljs-property">salience</span>

  <span class="hljs-comment">// Recency boost</span>
  <span class="hljs-keyword">const</span> hours_since = (<span class="hljs-title function_">now</span>() - memory.<span class="hljs-property">last_seen_at</span>) / <span class="hljs-number">3600000</span>
  <span class="hljs-keyword">const</span> recency_boost = hours_since &lt; <span class="hljs-number">24</span> ? <span class="hljs-number">1.2</span> : <span class="hljs-number">1.0</span>

  <span class="hljs-comment">// Combined score</span>
  <span class="hljs-keyword">return</span> weighted_sim × (<span class="hljs-number">0.7</span> + salience_factor × <span class="hljs-number">0.3</span>) × recency_boost
}
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">This ensures hot, important, and recent memories rank higher.</p>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Monitoring and Observability</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Decay Logs</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Typical output</span>
[decay-2.0] 127/3456 | tiers: hot=512 warm=1823 cold=1121 | compressed=23 fingerprinted=8 | 1534.2ms across 18 segments
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Key metrics</strong>:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">127/3456</code>: 127 memories changed out of 3456 processed</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">hot=512</code>: 512 memories in hot tier (14.8%)</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">warm=1823</code>: 1823 in warm tier (52.7%)</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">cold=1121</code>: 1121 in cold tier (32.4%)</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">compressed=23</code>: 23 vectors compressed this cycle</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">fingerprinted=8</code>: 8 memories fingerprinted</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">1534.2ms</code>: Processing time</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">18 segments</code>: Memory segments processed</li>
</ul>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Health Indicators</h3>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Good distribution</strong>:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">hot: 10-20%   (active working set)
warm: 40-60%  (readily accessible)
cold: 30-50%  (archived, efficient)
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Warning signs</strong>:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">hot: &gt;50%     → Decay too slow, storage inefficient
cold: &gt;70%    → Decay too aggressive, poor recall
hot: &lt;5%      → Everything decaying, check reinforcement
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Tuning</strong>:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Increase <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_DECAY_COLD_THRESHOLD</code> → More aggressive</li>
<li class="text-gray-300 leading-relaxed">Decrease <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_DECAY_COLD_THRESHOLD</code> → More conservative</li>
<li class="text-gray-300 leading-relaxed">Enable <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_DECAY_REINFORCE_ON_QUERY</code> → Keep useful memories hot</li>
</ul>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Comparison with Alternatives</h2>
<div class="overflow-x-auto mb-6 rounded-lg border border-dark-700"><table class="min-w-full divide-y divide-dark-700"><thead class="bg-dark-800/30"><tr class="hover:bg-dark-800/30"><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">System</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Decay Model</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Compression</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Regeneration</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Sectors</th><th class="px-4 py-3 text-left text-sm font-semibold text-gray-100">Cost</th></tr></thead><tbody class="divide-y divide-dark-700"><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300"><strong>HMD v2</strong></td><td class="px-4 py-3 text-sm text-gray-300">3-tier exponential</td><td class="px-4 py-3 text-sm text-gray-300">Adaptive</td><td class="px-4 py-3 text-sm text-gray-300">Yes</td><td class="px-4 py-3 text-sm text-gray-300">Yes</td><td class="px-4 py-3 text-sm text-gray-300">$$</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Redis</td><td class="px-4 py-3 text-sm text-gray-300">TTL (binary)</td><td class="px-4 py-3 text-sm text-gray-300">None</td><td class="px-4 py-3 text-sm text-gray-300">No</td><td class="px-4 py-3 text-sm text-gray-300">No</td><td class="px-4 py-3 text-sm text-gray-300">$</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">LRU Cache</td><td class="px-4 py-3 text-sm text-gray-300">Eviction-based</td><td class="px-4 py-3 text-sm text-gray-300">None</td><td class="px-4 py-3 text-sm text-gray-300">No</td><td class="px-4 py-3 text-sm text-gray-300">No</td><td class="px-4 py-3 text-sm text-gray-300">$</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Vector DB</td><td class="px-4 py-3 text-sm text-gray-300">No decay</td><td class="px-4 py-3 text-sm text-gray-300">None</td><td class="px-4 py-3 text-sm text-gray-300">N/A</td><td class="px-4 py-3 text-sm text-gray-300">No</td><td class="px-4 py-3 text-sm text-gray-300">$$$$</td></tr><tr class="hover:bg-dark-800/30"><td class="px-4 py-3 text-sm text-gray-300">Pinecone</td><td class="px-4 py-3 text-sm text-gray-300">No decay</td><td class="px-4 py-3 text-sm text-gray-300">None</td><td class="px-4 py-3 text-sm text-gray-300">N/A</td><td class="px-4 py-3 text-sm text-gray-300">Limited</td><td class="px-4 py-3 text-sm text-gray-300">$$$$$</td></tr></tbody></table></div>
<p class="mb-5 text-gray-300 leading-relaxed">HMD v2 uniquely combines:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Natural decay patterns</li>
<li class="text-gray-300 leading-relaxed">Storage optimization</li>
<li class="text-gray-300 leading-relaxed">Automatic recovery</li>
<li class="text-gray-300 leading-relaxed">Brain-inspired organization</li>
</ul>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Best Practices</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Choose Appropriate Tier</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Match your use case:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Speed-critical applications</span>
OM_TIER=fast  <span class="hljs-comment"># 256d, fastest queries</span>

<span class="hljs-comment"># Balanced production</span>
OM_TIER=hybrid  <span class="hljs-comment"># 256d + BM25, best of both</span>

<span class="hljs-comment"># High-accuracy knowledge base</span>
OM_TIER=deep  <span class="hljs-comment"># 1536d, maximum semantic fidelity</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Configure Decay Aggressiveness</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Long-term knowledge preservation</span>
OM_DECAY_COLD_THRESHOLD=0.15  <span class="hljs-comment"># Less aggressive fingerprinting</span>

<span class="hljs-comment"># Storage-constrained environment</span>
OM_DECAY_COLD_THRESHOLD=0.35  <span class="hljs-comment"># More aggressive compression</span>

<span class="hljs-comment"># Production balanced (default)</span>
OM_DECAY_COLD_THRESHOLD=0.25
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Enable Reinforcement</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Recommended for all production deployments</span>
OM_DECAY_REINFORCE_ON_QUERY=<span class="hljs-literal">true</span>

<span class="hljs-comment"># Prevents frequently-used memories from decaying</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Monitor Distribution</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Watch decay logs for tier distribution</span>
<span class="hljs-comment"># Adjust thresholds if distribution is unhealthy</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Plan for Regeneration Costs</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Regeneration requires embedding API calls</span>
<span class="hljs-comment"># Budget for ~5-10% of memories regenerating per day</span>

<span class="hljs-comment"># Enable regeneration (recommended)</span>
OM_REGENERATION_ENABLED=<span class="hljs-literal">true</span>
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Next Steps</h2>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Learn about <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="decay.html">Decay Algorithm</a> implementation details</li>
<li class="text-gray-300 leading-relaxed">Understand <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="sectors.html">Brain Sectors</a> and sector-specific decay</li>
<li class="text-gray-300 leading-relaxed">Explore <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="waypoints.html">Waypoints</a> for graph navigation</li>
<li class="text-gray-300 leading-relaxed">Configure <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="../advanced/environment-variables.html">Environment Variables</a></li>
<li class="text-gray-300 leading-relaxed">Read about <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="../advanced/embedding-modes.html">Embedding Modes</a> and tier selection</li>
</ul></div></article><div class="mt-12 pt-6 border-t border-dark-700"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 text-sm text-gray-500"><div>© 2025 OpenMemory · MIT License</div><div class="flex space-x-6"><a href="https://github.com/caviraoss/openmemory/issues" class="hover:text-primary-400 transition-colors">Report Issue</a><a href="https://github.com/caviraoss/openmemory" class="hover:text-primary-400 transition-colors">Edit on GitHub</a></div></div></div></main></div></div></div><!--$--><!--/$--></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"meta":{"title":"HMD v2 (HSG) Specification","description":"OpenMemory's Hierarchical Semantic Graph with tiered decay and adaptive compression","slug":"concepts/hmd-v2"},"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    code: \"code\",\n    h1: \"h1\",\n    h2: \"h2\",\n    h3: \"h3\",\n    li: \"li\",\n    p: \"p\",\n    pre: \"pre\",\n    span: \"span\",\n    strong: \"strong\",\n    table: \"table\",\n    tbody: \"tbody\",\n    td: \"td\",\n    th: \"th\",\n    thead: \"thead\",\n    tr: \"tr\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"HMD v2 (HSG) Specification\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Hierarchical Memory Decay version 2\"\n      }), \" implements a \", _jsx(_components.strong, {\n        children: \"Hierarchical Semantic Graph (HSG)\"\n      }), \" architecture with tiered decay, adaptive compression, and automatic regeneration.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Overview\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"HMD v2 differs from traditional caching and memory systems by:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Three-tier classification\"\n        }), \" (hot/warm/cold) based on recency and activity\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Adaptive vector compression\"\n        }), \" preserving semantic meaning while reducing storage\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Fingerprinting\"\n        }), \" for cold memories with automatic regeneration\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Brain-inspired sectors\"\n        }), \" with sector-specific decay characteristics\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Coactivation tracking\"\n        }), \" to boost frequently accessed memories\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This creates a memory system that mimics human cognition: recent and important memories remain vivid, while old memories compress but stay retrievable.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Core Architecture\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Tiered Memory States\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"┌─────────────────────────────────────────────────┐\\n│  HOT (λ=0.005)                                  │\\n│  • Recent + High activity                       │\\n│  • Full resolution vectors                      │\\n│  • No compression                               │\\n│  • Criteria: \u003c6 days AND (coact\u003e5 OR sal\u003e0.7)  │\\n└─────────────────────────────────────────────────┘\\n           ↓ (aging or low activity)\\n┌─────────────────────────────────────────────────┐\\n│  WARM (λ=0.02)                                  │\\n│  • Recent OR moderate salience                  │\\n│  • Compressed when f\u003c0.7                        │\\n│  • Accessible with minimal latency              │\\n│  • Criteria: \u003c6 days OR sal\u003e0.4                 │\\n└─────────────────────────────────────────────────┘\\n           ↓ (continued inactivity)\\n┌─────────────────────────────────────────────────┐\\n│  COLD (λ=0.05)                                  │\\n│  • Old + low salience                           │\\n│  • Heavy compression or fingerprinting          │\\n│  • Regenerates on access                        │\\n│  • Criteria: Not hot/warm                       │\\n└─────────────────────────────────────────────────┘\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"HSG Tier Configuration\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Memory storage tier affects maximum vector dimensions:\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Tier\"\n          }), _jsx(_components.th, {\n            children: \"Dimensions\"\n          }), _jsx(_components.th, {\n            children: \"Cache\"\n          }), _jsx(_components.th, {\n            children: \"Max Active\"\n          }), _jsx(_components.th, {\n            children: \"Features\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Fast\"\n          }), _jsx(_components.td, {\n            children: \"256\"\n          }), _jsx(_components.td, {\n            children: \"2 seg\"\n          }), _jsx(_components.td, {\n            children: \"32\"\n          }), _jsx(_components.td, {\n            children: \"Speed-optimized\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Smart\"\n          }), _jsx(_components.td, {\n            children: \"384\"\n          }), _jsx(_components.td, {\n            children: \"3 seg\"\n          }), _jsx(_components.td, {\n            children: \"64\"\n          }), _jsx(_components.td, {\n            children: \"Balanced\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Deep\"\n          }), _jsx(_components.td, {\n            children: \"1536\"\n          }), _jsx(_components.td, {\n            children: \"5 seg\"\n          }), _jsx(_components.td, {\n            children: \"128\"\n          }), _jsx(_components.td, {\n            children: \"High accuracy\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Hybrid\"\n          }), _jsx(_components.td, {\n            children: \"256 + BM25\"\n          }), _jsx(_components.td, {\n            children: \"3 seg\"\n          }), _jsx(_components.td, {\n            children: \"64\"\n          }), _jsx(_components.td, {\n            children: \"Semantic + keyword\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Set via environment variable:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [\"OM_TIER=hybrid  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Recommended default\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Mathematical Model\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Tier Classification\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"classify_tier\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"memory, now_ts\"\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'hot'\"\n        }), \" | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'warm'\"\n        }), \" | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'cold'\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" dt = now_ts - memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"last_seen_at\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" recent = dt \u003c 6_days\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" high = memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"coactivations\"\n        }), \" \u003e \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"5\"\n        }), \" || memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \" \u003e \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.7\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (recent \u0026\u0026 high) \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'hot'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (recent || memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \" \u003e \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.4\"\n        }), \") \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'warm'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'cold'\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Decay Formula\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"f = exp(-λ × dt / (salience + 0.1))\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Where:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"λ\"\n        }), \" = Tier decay constant (0.005 hot, 0.02 warm, 0.05 cold)\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"dt\"\n        }), \" = Days elapsed since last access\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"salience\"\n        }), \" = Current strength, boosted by coactivations\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Salience Calculation\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"boosted_salience = clamp(\\n  base_salience × (1 + ln(1 + coactivations)),\\n  0,\\n  1\\n)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Logarithmic coactivation boost prevents unbounded growth while rewarding access.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"New Salience After Decay\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"new_salience = clamp(salience × f, 0, 1)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Compression Target Dimensions\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"target_dim = floor(original_dim × f)\\ntarget_dim = clamp(target_dim, min_vec_dim, max_vec_dim)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Defaults:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"min_vec_dim\"\n        }), \" = 64 (configurable via \", _jsx(_components.code, {\n          children: \"OM_MIN_VECTOR_DIM\"\n        }), \")\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"max_vec_dim\"\n        }), \" = 256/384/1536 (based on \", _jsx(_components.code, {\n          children: \"OM_TIER\"\n        }), \")\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Implementation Details\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Memory Structure\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"interface\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"HSGMemory\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"id\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"content\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"summary\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"primary_sector\"\n        }), \":\\n    | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"episodic\\\"\"\n        }), \"\\n    | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"semantic\\\"\"\n        }), \"\\n    | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"procedural\\\"\"\n        }), \"\\n    | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"emotional\\\"\"\n        }), \"\\n    | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"reflective\\\"\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"sectors\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \"[];\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"salience\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"; \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 0.0-1.0\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"decay_lambda\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"; \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Sector-specific\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"coactivations\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"; \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Access count\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"last_seen_at\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"; \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Timestamp\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"created_at\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"updated_at\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"version\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \";\\n}\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"interface\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"HSGVector\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"id\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"sector\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"vector\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"[]; \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Adaptive dimensions\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Brain Sector Integration\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Each sector has specialized decay characteristics:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" sector_configs = {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"episodic\"\n        }), \": {\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"decay_lambda\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.015\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Medium-fast (events fade)\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"weight\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.2\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Boosted importance\"\n        }), \"\\n  },\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"semantic\"\n        }), \": {\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"decay_lambda\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.005\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Very slow (facts persist)\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"weight\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Standard\"\n        }), \"\\n  },\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"procedural\"\n        }), \": {\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"decay_lambda\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.008\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Slow (habits stable)\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"weight\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Slightly boosted\"\n        }), \"\\n  },\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"emotional\"\n        }), \": {\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"decay_lambda\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.02\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Fast (emotions fade quickly)\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"weight\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.3\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Highly boosted\"\n        }), \"\\n  },\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"reflective\"\n        }), \": {\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"decay_lambda\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.001\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Extremely slow (learnings persist)\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"weight\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.8\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Background context\"\n        }), \"\\n  },\\n};\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"See \", _jsx(_components.a, {\n        href: \"/docs/concepts/sectors\",\n        children: \"Brain Sectors\"\n      }), \" for detailed sector information.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Compression Algorithm\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"compress_vector\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [\"\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"vec\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \"[],\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"f\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \",\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"min_dim\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \",\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"max_dim\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \"\\n\"]\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"[] {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" target_dim = \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Math\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"floor\"\n        }), \"(vec.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \" * f);\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" dim = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"clamp\"\n        }), \"(target_dim, min_dim, \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Math\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"min\"\n        }), \"(max_dim, vec.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \"));\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (dim \u003e= vec.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \") \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" vec;\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Pooling-based compression\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" bucket_size = \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Math\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"ceil\"\n        }), \"(vec.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \" / dim);\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" compressed = [];\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"for\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"let\"\n        }), \" i = \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"; i \u003c vec.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \"; i += bucket_size) {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" bucket = vec.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"slice\"\n        }), \"(i, i + bucket_size);\\n    compressed.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"push\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"mean\"\n        }), \"(bucket));\\n  }\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"normalize\"\n        }), \"(compressed);\\n}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Example Compression Path\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"1536d (f=1.0) → 1075d (f=0.7) → 614d (f=0.4) → 307d (f=0.2) → 64d (min)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Summary Compression\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"compress_summary\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [\"\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"text\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"string\"\n          }), \",\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"f\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \",\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"layers\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \"\\n\"]\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (f \u003e \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.8\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Light: truncate to 200 chars\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"truncate\"\n        }), \"(text, \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"200\"\n        }), \")\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (f \u003e \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.4\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Medium: extractive summary\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"summarize_quick\"\n        }), \"(text, \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"max_length\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"80\"\n        }), \")\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Heavy: keywords only\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"top_keywords\"\n        }), \"(text, \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"count\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"5\"\n        }), \").\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"join\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"' '\"\n        }), \")\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Fingerprinting\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When \", _jsx(_components.code, {\n        children: \"f \u003c cold_threshold\"\n      }), \" (default 0.25):\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"fingerprint_memory\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"memory\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-title class_\",\n            children: \"HSGMemory\"\n          })]\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Fingerprint\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Create deterministic hash vector\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" hash_input = memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \" + \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"|\\\"\"\n        }), \" + memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"summary\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" fingerprint_vec = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"hash_to_vec\"\n        }), \"(hash_input, \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"32\"\n        }), \"); \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 32 dimensions\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Extract top keywords\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" keywords = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"top_keywords\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"content\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"3\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" fingerprint_summary = keywords.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"join\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\" \\\"\"\n        }), \");\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"vector\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"normalize\"\n        }), \"(fingerprint_vec),\\n    \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"summary\"\n        }), \": fingerprint_summary,\\n  };\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Fingerprinted memories:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Use ~95% less storage\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Still searchable via keywords\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Automatically regenerate when accessed\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Decay Process\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Periodic Execution\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Runs every OM_DECAY_INTERVAL_MINUTES (default: 1440 = 24 hours)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Skips if:\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// - Active queries running (active_q \u003e 0)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// - Cooldown period not elapsed (\u003c60s since last decay)\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"apply_decay\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"for\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" segment \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"of\"\n        }), \" memory_segments) {\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Process batch (OM_DECAY_RATIO × segment_size)\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" batch = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"select_random_batch\"\n        }), \"(segment, \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"ratio\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.03\"\n        }), \")\\n\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Parallel processing across threads\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"parallelize\"\n        }), \"(batch, \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"threads\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OM_DECAY_THREADS\"\n        }), \")\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Per-Memory Decay Steps\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"for\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" memory \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"of\"\n        }), \" batch) {\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 1. Classify tier\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" tier = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"classify_tier\"\n        }), \"(memory, now)\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 2. Get tier-specific lambda\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" λ = tier === \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'hot'\"\n        }), \" ? \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.005\"\n        }), \" : tier === \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'warm'\"\n        }), \" ? \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.02\"\n        }), \" : \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.05\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 3. Calculate decay factor\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" dt = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"days_since\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"last_seen_at\"\n        }), \")\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" boosted_sal = memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \" × (\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \" + \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"ln\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \" + memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"coactivations\"\n        }), \"))\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" f = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"exp\"\n        }), \"(-λ × dt / (boosted_sal + \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.1\"\n        }), \"))\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 4. Apply salience decay\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" new_salience = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"clamp\"\n        }), \"(boosted_sal × f, \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \")\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 5. Compress if needed (f \u003c 0.7)\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (f \u003c \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.7\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" new_vec = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"compress_vector\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"vector\"\n        }), \", f)\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" new_summary = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"compress_summary\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"summary\"\n        }), \", f)\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"update_vector\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \", new_vec)\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"update_summary\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \", new_summary)\\n  }\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 6. Fingerprint if very cold (f \u003c cold_threshold)\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (f \u003c \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.25\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" fp = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"fingerprint_memory\"\n        }), \"(memory)\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"update_vector\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \", fp.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"vector\"\n        }), \")  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 32d fingerprint\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"update_summary\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \", fp.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"summary\"\n        }), \")  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Keywords only\"\n        }), \"\\n  }\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 7. Update salience\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"update_salience\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \", new_salience)\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Batch Processing Strategy\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Stochastic sampling prevents processing same memories repeatedly\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" batch_size = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"floor\"\n        }), \"(segment_size × \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OM_DECAY_RATIO\"\n        }), \")\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" random_start = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"random\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", segment_size - batch_size)\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" batch = memories.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"slice\"\n        }), \"(random_start, random_start + batch_size)\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Distribute across threads for parallelization\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" threads = \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OM_DECAY_THREADS\"\n        }), \"  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// default: 3\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" chunks = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"chunkify\"\n        }), \"(batch, threads)\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Process in parallel\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Promise\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"all\"\n        }), \"(chunks.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"map\"\n        }), \"(process_chunk))\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Sleep between segments to avoid overwhelming system\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"sleep\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OM_DECAY_SLEEP_MS\"\n        }), \")  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// default: 200ms\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Regeneration on Access\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Automatic Regeneration\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When a fingerprinted memory is queried:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"on_query_hit\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [\"\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"memory_id\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"string\"\n          }), \",\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"sector\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"string\"\n          }), \",\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"reembed\"\n          }), \": (text: \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"string\"\n          }), \") =\u003e \", _jsx(_components.span, {\n            className: \"hljs-title class_\",\n            children: \"Promise\"\n          }), \"\u003c\", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \"[]\u003e\\n\"]\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" memory = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"get_memory\"\n        }), \"(memory_id);\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" vector = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"get_vector\"\n        }), \"(memory_id, sector);\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Check if fingerprinted (≤64 dimensions)\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (vector.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \" \u003c= \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"64\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Regenerate full embedding\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" original_text = memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"summary\"\n        }), \" || memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"content\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" new_vector = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"reembed\"\n        }), \"(original_text);\\n\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Replace fingerprint with full vector\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"update_vector\"\n        }), \"(memory_id, sector, new_vector);\\n\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"log\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-string\",\n          children: [\"`[hsg] regenerated memory \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${memory_id}\"\n          }), \"`\"]\n        }), \");\\n  }\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Reinforce salience\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OM_DECAY_REINFORCE_ON_QUERY\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" new_salience = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"clamp\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \" + \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.5\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \");\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"update_salience\"\n        }), \"(memory_id, new_salience);\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"update_last_seen\"\n        }), \"(memory_id, \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"now\"\n        }), \"());\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Reinforce-on-Query\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Enabled by default (OM_DECAY_REINFORCE_ON_QUERY=true)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Prevents useful memories from fading\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"reinforce_on_query\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"memory\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-title class_\",\n            children: \"HSGMemory\"\n          })]\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Significant boost to salience\"\n        }), \"\\n  memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"min\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.0\"\n        }), \", memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \" + \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.5\"\n        }), \");\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Update access tracking\"\n        }), \"\\n  memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"last_seen_at\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"now\"\n        }), \"();\\n  memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"coactivations\"\n        }), \"++;\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Effect: Memory likely moves to hot/warm tier\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Configuration\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Environment Variables\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Tier system (affects max vector dimensions)\"\n        }), \"\\nOM_TIER=hybrid  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# fast=256d, smart=384d, deep=1536d, hybrid=256d+BM25\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Decay behavior\"\n        }), \"\\nOM_DECAY_THREADS=3  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Parallel processing threads\"\n        }), \"\\nOM_DECAY_RATIO=0.03  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Portion of memories to decay per cycle (3%)\"\n        }), \"\\nOM_DECAY_SLEEP_MS=200  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Sleep between segment processing\"\n        }), \"\\nOM_DECAY_COLD_THRESHOLD=0.25  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Fingerprint threshold\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Compression limits\"\n        }), \"\\nOM_MAX_VECTOR_DIM=1536  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Maximum dimensions (set by tier)\"\n        }), \"\\nOM_MIN_VECTOR_DIM=64  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Minimum dimensions after compression\"\n        }), \"\\nOM_SUMMARY_LAYERS=3  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Summary compression layers (1-3)\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Regeneration and reinforcement\"\n        }), \"\\nOM_DECAY_REINFORCE_ON_QUERY=\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Auto-reinforce matched memories\"\n        }), \"\\nOM_REGENERATION_ENABLED=\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Regenerate fingerprinted memories\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Decay interval\"\n        }), \"\\nOM_DECAY_INTERVAL_MINUTES=1440  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Run decay every 24 hours\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"See \", _jsx(_components.a, {\n        href: \"/docs/advanced/environment-variables\",\n        children: \"Environment Variables\"\n      }), \" for complete reference.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Sector-Specific Configuration\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Sectors are configured in \", _jsx(_components.code, {\n        children: \"models.yml\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-yaml\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"episodic:\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"ollama:\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"nomic-embed-text\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"openai:\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"text-embedding-3-small\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"gemini:\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"models/embedding-001\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"semantic:\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"ollama:\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"nomic-embed-text\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"openai:\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"text-embedding-3-small\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"gemini:\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"models/embedding-001\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# ... procedural, emotional, reflective\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Each sector has hardcoded decay lambda in the implementation:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"episodic\"\n        }), \": λ = 0.015\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"semantic\"\n        }), \": λ = 0.005\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"procedural\"\n        }), \": λ = 0.008\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"emotional\"\n        }), \": λ = 0.020\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"reflective\"\n        }), \": λ = 0.001\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Performance Characteristics\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Storage Efficiency\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Compression dramatically reduces storage requirements:\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"State\"\n          }), _jsx(_components.th, {\n            children: \"Vector Dims\"\n          }), _jsx(_components.th, {\n            children: \"Summary Length\"\n          }), _jsx(_components.th, {\n            children: \"Storage vs Hot\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Hot (full)\"\n          }), _jsx(_components.td, {\n            children: \"1536d\"\n          }), _jsx(_components.td, {\n            children: \"Full text\"\n          }), _jsx(_components.td, {\n            children: \"100%\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Warm (partial)\"\n          }), _jsx(_components.td, {\n            children: \"1075d\"\n          }), _jsx(_components.td, {\n            children: \"Summarized\"\n          }), _jsx(_components.td, {\n            children: \"~70%\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Warm (more)\"\n          }), _jsx(_components.td, {\n            children: \"614d\"\n          }), _jsx(_components.td, {\n            children: \"Keywords+\"\n          }), _jsx(_components.td, {\n            children: \"~40%\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Cold (heavy)\"\n          }), _jsx(_components.td, {\n            children: \"307d\"\n          }), _jsx(_components.td, {\n            children: \"Keywords\"\n          }), _jsx(_components.td, {\n            children: \"~20%\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Cold (minimal)\"\n          }), _jsx(_components.td, {\n            children: \"64d\"\n          }), _jsx(_components.td, {\n            children: \"3-5 keywords\"\n          }), _jsx(_components.td, {\n            children: \"~5%\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Fingerprinted\"\n          }), _jsx(_components.td, {\n            children: \"32d\"\n          }), _jsx(_components.td, {\n            children: \"3 keywords\"\n          }), _jsx(_components.td, {\n            children: \"~2%\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Example\"\n      }), \": 100,000 memories at 1536d = 100K memories\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"All hot: ~600MB vector storage\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"50% fingerprinted: ~300MB (50% savings)\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"80% fingerprinted: ~120MB (80% savings)\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Query Performance\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Tier distribution affects query speed:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"Hot memories:  \u003c1ms retrieval (full vectors, cached)\\nWarm memories: 1-5ms retrieval (compressed but loaded)\\nCold memories: 5-10ms retrieval (heavily compressed)\\nFingerprinted: 10-50ms if matched (requires regeneration)\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Optimization\"\n      }), \": Frequently queried memories naturally migrate to hot tier through reinforcement.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Memory Distribution\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Healthy distribution example for knowledge base:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"Hot:   15% (recently accessed, high activity)\\nWarm:  45% (moderately recent or important)\\nCold:  40% (archived but retrievable)\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Adjust \", _jsx(_components.code, {\n        children: \"OM_DECAY_COLD_THRESHOLD\"\n      }), \" to shift distribution:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Lower threshold (0.15): More hot/warm, less aggressive\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Higher threshold (0.35): More cold/fingerprinted, more aggressive\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Advanced Features\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Waypoints and Graph Structure\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"HSG maintains semantic connections between memories:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"interface\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Waypoint\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"src_id\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"dst_id\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"weight\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"; \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Semantic similarity\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"created_at\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"updated_at\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \";\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Waypoints enable:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Cross-sector memory navigation\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Related memory discovery\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Context-aware retrieval\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Graph-based reasoning\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Coactivation Tracking\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Memories accessed together strengthen their connection:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"track_coactivation\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"memory_ids\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"string\"\n          }), \"[]\"]\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"for\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" id \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"of\"\n        }), \" memory_ids) {\\n    memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"coactivations\"\n        }), \"++\\n\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Boost salience via logarithmic scaling\"\n        }), \"\\n    memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"clamp\"\n        }), \"(\\n      memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \" × (\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \" + \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"ln\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \" + memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"coactivations\"\n        }), \")),\\n      \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \"\\n    )\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"High coactivation count:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Pushes memory toward hot tier\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Slows decay rate\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Increases query relevance\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Query-Time Scoring\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Memory relevance combines multiple factors:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"calculate_score\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [\"\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"memory\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-title class_\",\n            children: \"HSGMemory\"\n          }), \",\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"query_vec\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \"[],\\n  \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"sector_weight\"\n          }), \": \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \"\\n\"]\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Semantic similarity\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" similarity = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"cosine_similarity\"\n        }), \"(memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"vector\"\n        }), \", query_vec)\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Sector-specific weight (emotional=1.3, reflective=0.8, etc.)\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" weighted_sim = similarity × sector_weight\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Salience boost\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" salience_factor = memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"salience\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Recency boost\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" hours_since = (\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"now\"\n        }), \"() - memory.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"last_seen_at\"\n        }), \") / \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"3600000\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" recency_boost = hours_since \u003c \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"24\"\n        }), \" ? \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.2\"\n        }), \" : \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.0\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Combined score\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" weighted_sim × (\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.7\"\n        }), \" + salience_factor × \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.3\"\n        }), \") × recency_boost\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This ensures hot, important, and recent memories rank higher.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Monitoring and Observability\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Decay Logs\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Typical output\"\n        }), \"\\n[decay-2.0] 127/3456 | tiers: hot=512 warm=1823 cold=1121 | compressed=23 fingerprinted=8 | 1534.2ms across 18 segments\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Key metrics\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"127/3456\"\n        }), \": 127 memories changed out of 3456 processed\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"hot=512\"\n        }), \": 512 memories in hot tier (14.8%)\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"warm=1823\"\n        }), \": 1823 in warm tier (52.7%)\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"cold=1121\"\n        }), \": 1121 in cold tier (32.4%)\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"compressed=23\"\n        }), \": 23 vectors compressed this cycle\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"fingerprinted=8\"\n        }), \": 8 memories fingerprinted\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"1534.2ms\"\n        }), \": Processing time\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"18 segments\"\n        }), \": Memory segments processed\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Health Indicators\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Good distribution\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"hot: 10-20%   (active working set)\\nwarm: 40-60%  (readily accessible)\\ncold: 30-50%  (archived, efficient)\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Warning signs\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"hot: \u003e50%     → Decay too slow, storage inefficient\\ncold: \u003e70%    → Decay too aggressive, poor recall\\nhot: \u003c5%      → Everything decaying, check reinforcement\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Tuning\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Increase \", _jsx(_components.code, {\n          children: \"OM_DECAY_COLD_THRESHOLD\"\n        }), \" → More aggressive\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Decrease \", _jsx(_components.code, {\n          children: \"OM_DECAY_COLD_THRESHOLD\"\n        }), \" → More conservative\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Enable \", _jsx(_components.code, {\n          children: \"OM_DECAY_REINFORCE_ON_QUERY\"\n        }), \" → Keep useful memories hot\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Comparison with Alternatives\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"System\"\n          }), _jsx(_components.th, {\n            children: \"Decay Model\"\n          }), _jsx(_components.th, {\n            children: \"Compression\"\n          }), _jsx(_components.th, {\n            children: \"Regeneration\"\n          }), _jsx(_components.th, {\n            children: \"Sectors\"\n          }), _jsx(_components.th, {\n            children: \"Cost\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: \"HMD v2\"\n            })\n          }), _jsx(_components.td, {\n            children: \"3-tier exponential\"\n          }), _jsx(_components.td, {\n            children: \"Adaptive\"\n          }), _jsx(_components.td, {\n            children: \"Yes\"\n          }), _jsx(_components.td, {\n            children: \"Yes\"\n          }), _jsx(_components.td, {\n            children: \"$$\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Redis\"\n          }), _jsx(_components.td, {\n            children: \"TTL (binary)\"\n          }), _jsx(_components.td, {\n            children: \"None\"\n          }), _jsx(_components.td, {\n            children: \"No\"\n          }), _jsx(_components.td, {\n            children: \"No\"\n          }), _jsx(_components.td, {\n            children: \"$\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"LRU Cache\"\n          }), _jsx(_components.td, {\n            children: \"Eviction-based\"\n          }), _jsx(_components.td, {\n            children: \"None\"\n          }), _jsx(_components.td, {\n            children: \"No\"\n          }), _jsx(_components.td, {\n            children: \"No\"\n          }), _jsx(_components.td, {\n            children: \"$\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Vector DB\"\n          }), _jsx(_components.td, {\n            children: \"No decay\"\n          }), _jsx(_components.td, {\n            children: \"None\"\n          }), _jsx(_components.td, {\n            children: \"N/A\"\n          }), _jsx(_components.td, {\n            children: \"No\"\n          }), _jsx(_components.td, {\n            children: \"$$$$\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Pinecone\"\n          }), _jsx(_components.td, {\n            children: \"No decay\"\n          }), _jsx(_components.td, {\n            children: \"None\"\n          }), _jsx(_components.td, {\n            children: \"N/A\"\n          }), _jsx(_components.td, {\n            children: \"Limited\"\n          }), _jsx(_components.td, {\n            children: \"$$$$$\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"HMD v2 uniquely combines:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Natural decay patterns\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Storage optimization\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Automatic recovery\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Brain-inspired organization\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Best Practices\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Choose Appropriate Tier\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Match your use case:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Speed-critical applications\"\n        }), \"\\nOM_TIER=fast  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 256d, fastest queries\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Balanced production\"\n        }), \"\\nOM_TIER=hybrid  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 256d + BM25, best of both\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# High-accuracy knowledge base\"\n        }), \"\\nOM_TIER=deep  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 1536d, maximum semantic fidelity\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Configure Decay Aggressiveness\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Long-term knowledge preservation\"\n        }), \"\\nOM_DECAY_COLD_THRESHOLD=0.15  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Less aggressive fingerprinting\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Storage-constrained environment\"\n        }), \"\\nOM_DECAY_COLD_THRESHOLD=0.35  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# More aggressive compression\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Production balanced (default)\"\n        }), \"\\nOM_DECAY_COLD_THRESHOLD=0.25\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Enable Reinforcement\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Recommended for all production deployments\"\n        }), \"\\nOM_DECAY_REINFORCE_ON_QUERY=\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Prevents frequently-used memories from decaying\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Monitor Distribution\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Watch decay logs for tier distribution\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Adjust thresholds if distribution is unhealthy\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Plan for Regeneration Costs\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Regeneration requires embedding API calls\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Budget for ~5-10% of memories regenerating per day\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Enable regeneration (recommended)\"\n        }), \"\\nOM_REGENERATION_ENABLED=\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Next Steps\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Learn about \", _jsx(_components.a, {\n          href: \"/docs/concepts/decay\",\n          children: \"Decay Algorithm\"\n        }), \" implementation details\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Understand \", _jsx(_components.a, {\n          href: \"/docs/concepts/sectors\",\n          children: \"Brain Sectors\"\n        }), \" and sector-specific decay\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Explore \", _jsx(_components.a, {\n          href: \"/docs/concepts/waypoints\",\n          children: \"Waypoints\"\n        }), \" for graph navigation\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Configure \", _jsx(_components.a, {\n          href: \"/docs/advanced/environment-variables\",\n          children: \"Environment Variables\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Read about \", _jsx(_components.a, {\n          href: \"/docs/advanced/embedding-modes\",\n          children: \"Embedding Modes\"\n        }), \" and tier selection\"]\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["concepts","hmd-v2"]},"buildId":"B4NA5nCGTllebOHsFva8z","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>