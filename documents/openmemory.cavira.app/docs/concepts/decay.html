<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Decay Algorithm - OpenMemory Documentation</title><meta name="title" content="Decay Algorithm - OpenMemory Documentation"/><meta name="description" content="OpenMemory&#x27;s HSG-based tiered decay system with hot/warm/cold memory states"/><link rel="canonical" href="https://openmemory.ai/docs/concepts/decay"/><meta property="og:type" content="article"/><meta property="og:url" content="https://openmemory.ai/docs/concepts/decay"/><meta property="og:title" content="Decay Algorithm - OpenMemory Documentation"/><meta property="og:description" content="OpenMemory&#x27;s HSG-based tiered decay system with hot/warm/cold memory states"/><meta property="og:image" content="https://openmemory.ai/og-docs.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:site_name" content="OpenMemory"/><meta property="og:locale" content="en_US"/><meta property="article:published_time" content="2025-11-29T09:26:18.946Z"/><meta property="article:modified_time" content="2025-11-29T09:26:18.946Z"/><meta property="article:author" content="OpenMemory Team"/><meta property="article:section" content="Concepts"/><meta property="article:tag" content="concepts"/><meta property="article:tag" content="decay"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:url" content="https://openmemory.ai/docs/concepts/decay"/><meta name="twitter:title" content="Decay Algorithm - OpenMemory Documentation"/><meta name="twitter:description" content="OpenMemory&#x27;s HSG-based tiered decay system with hot/warm/cold memory states"/><meta name="twitter:image" content="https://openmemory.ai/og-docs.png"/><meta name="twitter:creator" content="@openmemory"/><meta name="twitter:site" content="@openmemory"/><meta name="keywords" content="AI memory, long-term memory, AI agents, vector database, embeddings, hierarchical memory, RAG, retrieval augmented generation, semantic search, knowledge graph, autonomous agents, LLM memory, chatbot memory"/><meta name="author" content="OpenMemory Team"/><meta name="publisher" content="OpenMemory"/><meta name="language" content="English"/><meta name="revisit-after" content="7 days"/><meta name="distribution" content="global"/><meta name="rating" content="general"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0"/><meta name="format-detection" content="telephone=no"/><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://openmemory.ai"},{"@type":"ListItem","position":2,"name":"Documentation","item":"https://openmemory.ai/docs"},{"@type":"ListItem","position":3,"name":"Concepts","item":"https://openmemory.ai/docs/concepts"},{"@type":"ListItem","position":4,"name":"Decay","item":"https://openmemory.ai/docs/concepts/decay"}]},{"@context":"https://schema.org","@type":"TechnicalArticle","headline":"Decay Algorithm","description":"OpenMemory's HSG-based tiered decay system with hot/warm/cold memory states","author":{"@type":"Person","name":"OpenMemory Team"},"datePublished":"2025-11-29T09:26:18.946Z","dateModified":"2025-11-29T09:26:18.946Z","image":"https://openmemory.ai/og-image.png","url":"https://openmemory.ai/docs/concepts/decay","publisher":{"@type":"Organization","name":"OpenMemory","logo":{"@type":"ImageObject","url":"https://openmemory.ai/logo.png"}}}]}</script><meta name="next-head-count" content="37"/><link rel="icon" href="../../icon.png"/><link rel="apple-touch-icon" href="../../icon.png"/><link rel="icon" type="image/png" sizes="192x192" href="../../icon.png"/><link rel="icon" type="image/png" sizes="512x512" href="../../icon.png"/><link rel="manifest" href="../../site.webmanifest"/><meta name="google-site-verification" content="Pd534PQ2aWGfjUWL8bOIeM6KQr0QwLmQYR4OOWUECzI"/><meta name="theme-color" content="#8b5cf6"/><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"/><meta name="googlebot" content="index, follow"/><meta name="bingbot" content="index, follow"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="canonical" href="https://openmemory.ai"/><link rel="preload" href="../../_next/static/css/98c4e29684169509.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/98c4e29684169509.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="../../_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="../../_next/static/chunks/webpack-6ef43a8d4a395f49.js" defer=""></script><script src="../../_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="../../_next/static/chunks/main-a2464d6d00b134e7.js" defer=""></script><script src="../../_next/static/chunks/pages/_app-3023ec3bb8a608f5.js" defer=""></script><script src="../../_next/static/chunks/996-1b55609011aad234.js" defer=""></script><script src="../../_next/static/chunks/pages/docs/[...slug]-8c5e687d752382af.js" defer=""></script><script src="../../_next/static/B4NA5nCGTllebOHsFva8z/_buildManifest.js" defer=""></script><script src="../../_next/static/B4NA5nCGTllebOHsFva8z/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-black text-gray-100"><div class="bg-gradient-radial"></div><header class="sticky top-0 z-50 navbar-glass"><div class="container mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between"><a class="flex items-center space-x-2.5 group" href="https://openmemory.cavira.app/"><span class="text-lg font-semibold text-white">OpenMemory</span></a><nav class="hidden md:flex items-center space-x-1"><a class="px-3 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors rounded-md hover:bg-white/3" href="https://openmemory.cavira.app/">Home</a><a class="px-3 py-2 text-sm font-medium text-primary-400 transition-colors rounded-md" href="../introduction.html">Docs</a><a href="https://github.com/caviraoss/openmemory" target="_blank" rel="noopener noreferrer" class="ml-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white text-sm font-medium rounded-lg transition-colors">GitHub</a></nav></div></header><div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10"><div class="flex gap-8 lg:gap-12"><aside class="hidden lg:block w-64 flex-shrink-0 sticky top-20 h-[calc(100vh-5rem)] overflow-y-auto py-8 pr-4"><nav class="space-y-8"><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Introduction</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../introduction.html">What is OpenMemory</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../standalone.html">Standalone vs Backend</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Getting Started</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../installation.html">Install</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../quick-start.html">Quick Start (Standalone)</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../quick-start-backend.html">Quick Start (Backend)</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">SDKs</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../sdks/javascript.html">JavaScript</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../sdks/python.html">Python</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">API Reference</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../api/routes.html">API Routes</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../api/add-memory.html">Add Memory</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../api/query.html">Query Memory</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Core Concepts</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="sectors.html">Sectors</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="decay.html">Decay</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="salience.html">Salience</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="associations.html">Associations</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="temporal-graph.html">Temporal Graph</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Advanced</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../advanced/embedding-modes.html">Embeddings</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../advanced/ingestion.html">Ingestion</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../integrations/mcp.html">MCP Server</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../advanced/langgraph.html">LangGraph Mode</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Examples</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../examples/agents.html">Agents</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../examples/claude.html">Claude Desktop</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../examples/python-chatbot.html">Python Chatbot</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../examples/nodejs-assistant.html">Node.js Assistant</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Deployment</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../deployment/backend.html">Backend Setup</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../deployment/docker.html">Docker</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../deployment/cloud.html">Vercel / Railway</a></li></ul></div><div><h3 class="text-xs font-semibold uppercase tracking-widest mb-3 px-3 transition-colors text-gray-600">Migration</h3><ul class="space-y-1"><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../migration/mem0.html">From Mem0</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../migration/supermemory.html">From Supermemory</a></li><li><a class="block px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative text-gray-400 hover:text-gray-200 hover:bg-white/3" href="../migration/zep.html">From Zep</a></li></ul></div></nav></aside><main class="flex-1 min-w-0 py-8 max-w-4xl"><article class="prose prose-lg max-w-none"><div class="p-8 lg:p-12 rounded-2xl"><div class="mb-8 pb-6 border-b border-dark-700"><h1 class="text-4xl md:text-5xl font-bold text-gray-50 mb-4 tracking-tight">Decay Algorithm</h1><p class="text-lg text-gray-400 leading-relaxed">OpenMemory&#x27;s HSG-based tiered decay system with hot/warm/cold memory states</p></div><h1 class="text-4xl md:text-5xl font-bold mb-6 text-gray-50 tracking-tight">Decay Algorithm</h1>
<p class="mb-5 text-gray-300 leading-relaxed">OpenMemory uses a <strong>Hierarchical Semantic Graph (HSG)</strong> decay system with three memory tiers that automatically adjust based on access patterns and age.</p>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Overview</h2>
<p class="mb-5 text-gray-300 leading-relaxed">Unlike simple time-based decay, OpenMemory&#x27;s HSG system:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><strong>Classifies memories into tiers</strong> (hot/warm/cold) based on recency and usage</li>
<li class="text-gray-300 leading-relaxed"><strong>Applies tier-specific decay rates</strong> (λ values)</li>
<li class="text-gray-300 leading-relaxed"><strong>Compresses vectors</strong> as memories cool down</li>
<li class="text-gray-300 leading-relaxed"><strong>Fingerprints cold memories</strong> to minimal representations</li>
<li class="text-gray-300 leading-relaxed"><strong>Regenerates on access</strong> when needed</li>
</ul>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Three-Tier System</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Hot Memories (Active)</h3>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Criteria</strong>: Recently accessed AND high activity</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Last seen &lt; 6 days AND (coactivations &gt; 5 OR salience &gt; 0.7)</li>
</ul>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Decay Rate</strong>: λ = 0.005 (very slow decay)</p>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Behavior</strong>:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Full vector dimensions maintained</li>
<li class="text-gray-300 leading-relaxed">No compression applied</li>
<li class="text-gray-300 leading-relaxed">Highest priority in queries</li>
<li class="text-gray-300 leading-relaxed">Optimal retrieval performance</li>
</ul>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Example</strong>:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Recently queried important memory</span>
<span class="hljs-comment"># Last seen: 2 days ago, coactivations: 8, salience: 0.85</span>
<span class="hljs-comment"># Status: HOT</span>
<span class="hljs-comment"># Vector: Full dimensions (256d/384d/1536d depending on tier)</span>
</code></pre>
<hr/>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Warm Memories (Recent)</h3>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Criteria</strong>: Recent OR moderate salience</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Last seen &lt; 6 days OR salience &gt; 0.4</li>
</ul>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Decay Rate</strong>: λ = 0.02 (moderate decay)</p>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Behavior</strong>:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Vectors begin compressing when f &lt; 0.7</li>
<li class="text-gray-300 leading-relaxed">Summary starts condensing</li>
<li class="text-gray-300 leading-relaxed">Still readily accessible</li>
<li class="text-gray-300 leading-relaxed">Balanced performance</li>
</ul>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Example</strong>:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Memory accessed a few days ago</span>
<span class="hljs-comment"># Last seen: 4 days ago, salience: 0.55</span>
<span class="hljs-comment"># Status: WARM</span>
<span class="hljs-comment"># Vector: May be compressed if decay factor drops</span>
</code></pre>
<hr/>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Cold Memories (Archived)</h3>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Criteria</strong>: Old AND low salience</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Doesn&#x27;t meet hot or warm criteria</li>
</ul>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Decay Rate</strong>: λ = 0.05 (fast decay)</p>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Behavior</strong>:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Heavy compression when f &lt; 0.7</li>
<li class="text-gray-300 leading-relaxed">Fingerprinting when f &lt; cold_threshold (default 0.25-0.3)</li>
<li class="text-gray-300 leading-relaxed">Minimal storage footprint</li>
<li class="text-gray-300 leading-relaxed">Can be regenerated on access</li>
</ul>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Example</strong>:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Old memory rarely accessed</span>
<span class="hljs-comment"># Last seen: 45 days ago, salience: 0.18</span>
<span class="hljs-comment"># Status: COLD</span>
<span class="hljs-comment"># Vector: Fingerprinted to 32d, summary reduced to keywords</span>
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Decay Formula</h2>
<p class="mb-5 text-gray-300 leading-relaxed">The decay factor determines memory transformation:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">f = exp(-λ × dt / (salience + 0.1))
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Where:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">λ</code> = Tier-specific decay constant (0.005/0.02/0.05)</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">dt</code> = Time elapsed in days since last access</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">salience</code> = Current memory strength (0-1), boosted by coactivations</li>
</ul>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Salience Calculation</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">salience = clamp((base_salience × (1 + ln(1 + coactivations))), 0, 1)
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Salience increases logarithmically with access count, preventing unbounded growth.</p>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">New Salience After Decay</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">new_salience = clamp(salience × f, 0, 1)
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Compression Mechanics</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Vector Compression</h3>
<p class="mb-5 text-gray-300 leading-relaxed">When decay factor <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">f &lt; 0.7</code>, vectors are compressed:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Original vector: 1536 dimensions</span>
<span class="hljs-comment"># Decay factor: f = 0.6</span>
<span class="hljs-comment"># Target dimensions: floor(1536 × 0.6) = 922 dimensions</span>

<span class="hljs-comment"># Compression via pooling</span>
bucket_size = ceil(original_dim / target_dim)
compressed_vec = [mean(vec[i:i+bucket_size]) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(vec), bucket_size)]
normalized = normalize(compressed_vec)
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Compression Limits</strong>:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><strong>Minimum</strong>: 64 dimensions</li>
<li class="text-gray-300 leading-relaxed"><strong>Maximum</strong>: Original dimensions (256/384/1536 based on <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_TIER</code>)</li>
</ul>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Example</strong>: 1536d → 922d → 614d → 384d → 256d → 128d → 64d (min)</p>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Summary Compression</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Summaries compress in layers based on decay factor:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-keyword">if</span> f &gt; <span class="hljs-number">0.8</span>:
    <span class="hljs-comment"># Light compression - truncate</span>
    summary = original[:<span class="hljs-number">200</span>] + <span class="hljs-string">&quot;...&quot;</span>
<span class="hljs-keyword">elif</span> f &gt; <span class="hljs-number">0.4</span>:
    <span class="hljs-comment"># Medium compression - extractive summary</span>
    summary = top_sentences(original, <span class="hljs-number">3</span>)[:<span class="hljs-number">80</span>]
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># Heavy compression - keywords only</span>
    summary = <span class="hljs-string">&quot; &quot;</span>.join(top_keywords(original, <span class="hljs-number">5</span>))
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Fingerprinting</h3>
<p class="mb-5 text-gray-300 leading-relaxed">When <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">f &lt; cold_threshold</code> (default 0.25-0.3), memories are fingerprinted:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Create minimal representation</span>
fingerprint_vector = hash_to_vec(<span class="hljs-built_in">id</span> + summary, <span class="hljs-number">32</span>)  <span class="hljs-comment"># 32 dimensions</span>
fingerprint_summary = <span class="hljs-string">&quot; &quot;</span>.join(top_keywords(content, <span class="hljs-number">3</span>))  <span class="hljs-comment"># 3 keywords</span>

<span class="hljs-comment"># Replace full memory</span>
update_vector(<span class="hljs-built_in">id</span>, fingerprint_vector)
update_summary(<span class="hljs-built_in">id</span>, fingerprint_summary)
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Fingerprinted memories occupy minimal space but can be regenerated when accessed.</p>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Practical Examples</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Example 1: Hot Memory Lifecycle</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Day 0: Add important memory</span>
om.add(<span class="hljs-string">&quot;Critical API authentication flow uses JWT tokens&quot;</span>)
<span class="hljs-comment"># Status: HOT (salience=0.8, coactivations=0)</span>
<span class="hljs-comment"># Vector: 1536d full resolution</span>

<span class="hljs-comment"># Day 2: Query increases coactivations</span>
om.query(<span class="hljs-string">&quot;authentication&quot;</span>)  <span class="hljs-comment"># Match found</span>
<span class="hljs-comment"># Status: HOT (salience=0.85, coactivations=1, last_seen=now)</span>
<span class="hljs-comment"># λ = 0.005, decay factor f ≈ 0.99</span>
<span class="hljs-comment"># Vector: Still 1536d</span>

<span class="hljs-comment"># Day 10: Another query</span>
om.query(<span class="hljs-string">&quot;JWT tokens&quot;</span>)  <span class="hljs-comment"># Match found</span>
<span class="hljs-comment"># Status: HOT (salience=0.90, coactivations=2, last_seen=now)</span>
<span class="hljs-comment"># Vector: 1536d (maintained by hot status)</span>

<span class="hljs-comment"># Result: Stays hot through regular access</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Example 2: Warm Memory Decay</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Day 0: Add general information</span>
om.add(<span class="hljs-string">&quot;Python supports list comprehensions for concise iteration&quot;</span>)
<span class="hljs-comment"># Status: WARM (salience=0.6, coactivations=0)</span>

<span class="hljs-comment"># Day 5: No access, decaying</span>
<span class="hljs-comment"># λ = 0.02, dt = 5 days</span>
<span class="hljs-comment"># f = exp(-0.02 × 5 / (0.6 + 0.1)) ≈ 0.87</span>
<span class="hljs-comment"># new_salience = 0.6 × 0.87 = 0.522</span>
<span class="hljs-comment"># Status: WARM</span>
<span class="hljs-comment"># Vector: 1536d (f &gt; 0.7, no compression yet)</span>

<span class="hljs-comment"># Day 12: More decay</span>
<span class="hljs-comment"># dt = 12 days</span>
<span class="hljs-comment"># f = exp(-0.02 × 12 / (0.522 + 0.1)) ≈ 0.70</span>
<span class="hljs-comment"># new_salience = 0.522 × 0.70 = 0.365</span>
<span class="hljs-comment"># Status: WARM</span>
<span class="hljs-comment"># Vector: 1536d (just at threshold)</span>

<span class="hljs-comment"># Day 20: Compression begins</span>
<span class="hljs-comment"># dt = 20 days</span>
<span class="hljs-comment"># f = exp(-0.02 × 20 / (0.365 + 0.1)) ≈ 0.46</span>
<span class="hljs-comment"># new_salience = 0.365 × 0.46 = 0.168</span>
<span class="hljs-comment"># Status: COLD (salience &lt; 0.4, old)</span>
<span class="hljs-comment"># Vector: Compressed to ~700d (1536 × 0.46)</span>
<span class="hljs-comment"># Summary: Compressed to keywords</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Example 3: Cold Memory Fingerprinting</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Day 0: Add session context</span>
om.add(<span class="hljs-string">&quot;User debugging timeout issue in production&quot;</span>, salience=<span class="hljs-number">0.5</span>)
<span class="hljs-comment"># Status: WARM</span>

<span class="hljs-comment"># Day 45: Long time, no access</span>
<span class="hljs-comment"># λ = 0.05 (cold), dt = 45 days</span>
<span class="hljs-comment"># f = exp(-0.05 × 45 / (0.5 + 0.1)) ≈ 0.0055</span>
<span class="hljs-comment"># new_salience = 0.5 × 0.0055 = 0.0027</span>
<span class="hljs-comment"># Status: COLD</span>
<span class="hljs-comment"># f &lt; 0.25 → FINGERPRINT</span>

<span class="hljs-comment"># Vector: 32d fingerprint (minimal)</span>
<span class="hljs-comment"># Summary: &quot;user debug timeout&quot;</span>
<span class="hljs-comment"># Storage: ~95% reduced</span>

<span class="hljs-comment"># Later: User queries &quot;timeout issues&quot;</span>
<span class="hljs-comment"># Match found in fingerprint</span>
<span class="hljs-comment"># on_query_hit() triggered</span>
<span class="hljs-comment"># → Regenerate full embedding from original content</span>
<span class="hljs-comment"># → Restore to WARM status</span>
<span class="hljs-comment"># → salience boosted to 0.5 + 0.5 = 1.0</span>
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Reinforcement and Regeneration</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Automatic Reinforcement on Query</h3>
<p class="mb-5 text-gray-300 leading-relaxed">When <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_DECAY_REINFORCE_ON_QUERY=true</code> (default), matched memories are reinforced:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Query matches a memory</span>
results = om.query(<span class="hljs-string">&quot;authentication flow&quot;</span>)

<span class="hljs-comment"># For each match, automatic reinforcement:</span>
new_salience = <span class="hljs-built_in">min</span>(<span class="hljs-number">1.0</span>, current_salience + <span class="hljs-number">0.5</span>)
last_seen_at = now()

<span class="hljs-comment"># Example:</span>
<span class="hljs-comment"># Before: salience = 0.35 (cold)</span>
<span class="hljs-comment"># After:  salience = 0.85 (hot again!)</span>
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">This prevents useful memories from fading away.</p>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Regeneration on Access</h3>
<p class="mb-5 text-gray-300 leading-relaxed">When <code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">OM_REGENERATION_ENABLED=true</code> (default), fingerprinted memories regenerate:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Memory is fingerprinted (32d vector, keyword summary)</span>
<span class="hljs-comment"># User queries and matches fingerprint</span>

<span class="hljs-comment"># Automatic regeneration:</span>
<span class="hljs-comment"># 1. Extract original content from database</span>
<span class="hljs-comment"># 2. Generate full embedding (256d/384d/1536d)</span>
<span class="hljs-comment"># 3. Replace fingerprint with full vector</span>
<span class="hljs-comment"># 4. Boost salience significantly</span>
<span class="hljs-comment"># 5. Update last_seen_at</span>

<span class="hljs-comment"># Result: Memory restored to full fidelity</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Manual Reinforcement</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Explicitly reinforce important memories:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Reinforce specific memory</span>
om.reinforce(memory_id=<span class="hljs-string">&quot;mem_123&quot;</span>)

<span class="hljs-comment"># Backend applies reinforcement formula:</span>
<span class="hljs-comment"># new_salience = min(1.0, old_salience + boost_amount)</span>
<span class="hljs-comment"># where boost_amount is typically 0.2-0.5</span>
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Environment Configuration</h2>
<p class="mb-5 text-gray-300 leading-relaxed">Control decay behavior via environment variables:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Decay threads for parallel processing</span>
OM_DECAY_THREADS=3

<span class="hljs-comment"># Cold threshold for fingerprinting (0.0-1.0)</span>
OM_DECAY_COLD_THRESHOLD=0.25

<span class="hljs-comment"># Auto-reinforce on query matches</span>
OM_DECAY_REINFORCE_ON_QUERY=<span class="hljs-literal">true</span>

<span class="hljs-comment"># Regenerate fingerprinted memories on access</span>
OM_REGENERATION_ENABLED=<span class="hljs-literal">true</span>

<span class="hljs-comment"># Max vector dimensions before compression</span>
OM_MAX_VECTOR_DIM=1536

<span class="hljs-comment"># Min vector dimensions after compression</span>
OM_MIN_VECTOR_DIM=64

<span class="hljs-comment"># Summary compression layers (1-3)</span>
OM_SUMMARY_LAYERS=3

<span class="hljs-comment"># Decay batch ratio (portion of memories to decay per cycle)</span>
OM_DECAY_RATIO=0.03

<span class="hljs-comment"># Sleep between segment processing (ms)</span>
OM_DECAY_SLEEP_MS=200

<span class="hljs-comment"># Base tier dimensions (affects max compression)</span>
OM_TIER=hybrid  <span class="hljs-comment"># fast=256d, smart=384d, deep=1536d, hybrid=256d+BM25</span>
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">See <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="../advanced/environment-variables.html">Environment Variables</a> for full reference.</p>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Decay Process Lifecycle</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Periodic Decay Cycle</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-typescript"><span class="hljs-comment">// Runs every OM_DECAY_INTERVAL_MINUTES (default 1440 = 24 hours)</span>

<span class="hljs-number">1.</span> <span class="hljs-title class_">Check</span> <span class="hljs-keyword">if</span> queries are <span class="hljs-title function_">active</span> (skip <span class="hljs-keyword">if</span> active_q &gt; <span class="hljs-number">0</span>)
<span class="hljs-number">2.</span> <span class="hljs-title class_">Check</span> cooldown <span class="hljs-title function_">period</span> (skip <span class="hljs-keyword">if</span> &lt; 60s since last decay)
<span class="hljs-number">3.</span> <span class="hljs-title class_">For</span> each memory <span class="hljs-attr">segment</span>:
   a. <span class="hljs-title class_">Load</span> batch <span class="hljs-keyword">of</span> <span class="hljs-title function_">memories</span> (<span class="hljs-variable constant_">OM_DECAY_RATIO</span> × segment_size)
   b. <span class="hljs-title class_">Classify</span> each into hot/warm/cold tier
   c. <span class="hljs-title class_">Calculate</span> decay factor f = <span class="hljs-title function_">exp</span>(-λ × dt / (salience + <span class="hljs-number">0.1</span>))
   d. <span class="hljs-title class_">Apply</span> salience <span class="hljs-attr">decay</span>: new_salience = salience × f
   e. <span class="hljs-title class_">If</span> f &lt; <span class="hljs-number">0.7</span>: compress vector and summary
   f. <span class="hljs-title class_">If</span> f &lt; <span class="hljs-attr">cold_threshold</span>: fingerprint memory
   g. <span class="hljs-title class_">Update</span> database <span class="hljs-keyword">with</span> <span class="hljs-keyword">new</span> values
   h. <span class="hljs-title class_">Sleep</span> <span class="hljs-variable constant_">OM_DECAY_SLEEP_MS</span> between segments
<span class="hljs-number">4.</span> <span class="hljs-title class_">Log</span> <span class="hljs-attr">statistics</span>: processed, changed, compressed, fingerprinted
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Batch Processing</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Decay processes memories in batches</span>
batch_size = floor(segment_size × OM_DECAY_RATIO)  <span class="hljs-comment"># e.g., 3% per cycle</span>
random_start = random(<span class="hljs-number">0</span>, segment_size - batch_size)
batch = memories[random_start:random_start + batch_size]

<span class="hljs-comment"># Distribute across threads</span>
threads = OM_DECAY_THREADS (default: <span class="hljs-number">3</span>)
per_thread = batch_size / threads

<span class="hljs-comment"># Parallel processing for performance</span>
<span class="hljs-keyword">await</span> Promise.<span class="hljs-built_in">all</span>(threads.<span class="hljs-built_in">map</span>(process_batch))
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">This ensures decay doesn&#x27;t overload the system.</p>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Monitoring Decay</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Decay Logs</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Watch decay process in action:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Typical decay cycle output</span>
[decay-2.0] 87/2891 | tiers: hot=342 warm=1456 cold=1093 | compressed=12 fingerprinted=3 | 1247.3ms across 15 segments
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed"><strong>Interpretation</strong>:</p>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">87/2891</code>: 87 memories changed out of 2891 processed</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">hot=342</code>: 342 memories in hot tier</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">warm=1456</code>: 1456 memories in warm tier</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">cold=1093</code>: 1093 memories in cold tier</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">compressed=12</code>: 12 vectors compressed</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">fingerprinted=3</code>: 3 memories fingerprinted</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">1247.3ms</code>: Processing time</li>
<li class="text-gray-300 leading-relaxed"><code class="px-2 py-1 bg-primary-500/15 text-primary-300 rounded border border-primary-500/25 text-sm font-mono">15 segments</code>: Memory segments processed</li>
</ul>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Query-Time Reinforcement Logs</h3>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># When memory is accessed</span>
[decay-2.0] regenerated/reinforced memory mem_abc123def456
</code></pre>
<p class="mb-5 text-gray-300 leading-relaxed">Indicates automatic regeneration or reinforcement occurred.</p>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Best Practices</h2>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Trust the Tiered System</h3>
<p class="mb-5 text-gray-300 leading-relaxed">The hot/warm/cold classification is automatic and intelligent:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Don&#x27;t manually set decay_lambda on individual memories</span>
<span class="hljs-comment"># The tier system handles it automatically based on:</span>
<span class="hljs-comment"># - Recency (last_seen_at)</span>
<span class="hljs-comment"># - Activity (coactivations)</span>
<span class="hljs-comment"># - Importance (salience)</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Configure Thresholds Appropriately</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Adjust based on your use case:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Long-term knowledge base</span>
OM_DECAY_COLD_THRESHOLD=0.15  <span class="hljs-comment"># Keep more memories unfingerpinted</span>

<span class="hljs-comment"># Short-term cache</span>
OM_DECAY_COLD_THRESHOLD=0.35  <span class="hljs-comment"># Aggressive fingerprinting</span>

<span class="hljs-comment"># Balanced (default)</span>
OM_DECAY_COLD_THRESHOLD=0.25
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Enable Reinforcement</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Keep useful memories alive:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Recommended for all use cases</span>
OM_DECAY_REINFORCE_ON_QUERY=<span class="hljs-literal">true</span>

<span class="hljs-comment"># Prevents frequently queried memories from fading</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Monitor Tier Distribution</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Check if distribution matches your use case:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-python"><span class="hljs-comment"># Get stats</span>
stats = om.get_stats()

<span class="hljs-comment"># Check tier distribution in logs</span>
<span class="hljs-comment"># Healthy distribution example:</span>
<span class="hljs-comment"># hot=20% (active recent memories)</span>
<span class="hljs-comment"># warm=50% (generally accessible)</span>
<span class="hljs-comment"># cold=30% (archived but retrievable)</span>

<span class="hljs-comment"># Adjust OM_DECAY_COLD_THRESHOLD if needed</span>
</code></pre>
<h3 class="text-2xl md:text-3xl font-semibold mt-10 mb-3 text-gray-100">Tune Compression Aggressiveness</h3>
<p class="mb-5 text-gray-300 leading-relaxed">Control storage vs. fidelity tradeoff:</p>
<pre class="bg-dark-850/60 border border-dark-700 rounded-lg p-4 overflow-x-auto mb-6"><code class="hljs language-bash"><span class="hljs-comment"># Preserve more fidelity</span>
OM_MIN_VECTOR_DIM=128  <span class="hljs-comment"># Compress less aggressively</span>
OM_SUMMARY_LAYERS=3    <span class="hljs-comment"># More detailed summaries</span>

<span class="hljs-comment"># Maximize storage savings</span>
OM_MIN_VECTOR_DIM=64   <span class="hljs-comment"># Compress more</span>
OM_SUMMARY_LAYERS=1    <span class="hljs-comment"># Minimal summaries</span>
</code></pre>
<h2 class="text-3xl md:text-4xl font-bold mt-12 mb-4 text-gray-50 pb-2 border-b border-dark-700">Next Steps</h2>
<ul class="list-disc pl-6 mb-6 space-y-2 text-gray-300">
<li class="text-gray-300 leading-relaxed">Understand <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="hmd-v2.html">HSG Architecture in HMD v2</a></li>
<li class="text-gray-300 leading-relaxed">Learn about <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="sectors.html">Brain Sectors</a> and sector-specific decay</li>
<li class="text-gray-300 leading-relaxed">Explore <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="../api/reinforce.html">Reinforcement API</a></li>
<li class="text-gray-300 leading-relaxed">Configure <a class="text-primary-400 hover:text-primary-300 font-medium transition-colors" href="../advanced/environment-variables.html">Environment Variables</a></li>
</ul></div></article><div class="mt-12 pt-6 border-t border-dark-700"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 text-sm text-gray-500"><div>© 2025 OpenMemory · MIT License</div><div class="flex space-x-6"><a href="https://github.com/caviraoss/openmemory/issues" class="hover:text-primary-400 transition-colors">Report Issue</a><a href="https://github.com/caviraoss/openmemory" class="hover:text-primary-400 transition-colors">Edit on GitHub</a></div></div></div></main></div></div></div><!--$--><!--/$--></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"meta":{"title":"Decay Algorithm","description":"OpenMemory's HSG-based tiered decay system with hot/warm/cold memory states","slug":"concepts/decay"},"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    code: \"code\",\n    h1: \"h1\",\n    h2: \"h2\",\n    h3: \"h3\",\n    hr: \"hr\",\n    li: \"li\",\n    p: \"p\",\n    pre: \"pre\",\n    span: \"span\",\n    strong: \"strong\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"Decay Algorithm\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"OpenMemory uses a \", _jsx(_components.strong, {\n        children: \"Hierarchical Semantic Graph (HSG)\"\n      }), \" decay system with three memory tiers that automatically adjust based on access patterns and age.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Overview\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Unlike simple time-based decay, OpenMemory's HSG system:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Classifies memories into tiers\"\n        }), \" (hot/warm/cold) based on recency and usage\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Applies tier-specific decay rates\"\n        }), \" (λ values)\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Compresses vectors\"\n        }), \" as memories cool down\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Fingerprints cold memories\"\n        }), \" to minimal representations\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Regenerates on access\"\n        }), \" when needed\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Three-Tier System\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Hot Memories (Active)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Criteria\"\n      }), \": Recently accessed AND high activity\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Last seen \u003c 6 days AND (coactivations \u003e 5 OR salience \u003e 0.7)\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Decay Rate\"\n      }), \": λ = 0.005 (very slow decay)\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Behavior\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Full vector dimensions maintained\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"No compression applied\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Highest priority in queries\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Optimal retrieval performance\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Example\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Recently queried important memory\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Last seen: 2 days ago, coactivations: 8, salience: 0.85\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: HOT\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: Full dimensions (256d/384d/1536d depending on tier)\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"Warm Memories (Recent)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Criteria\"\n      }), \": Recent OR moderate salience\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Last seen \u003c 6 days OR salience \u003e 0.4\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Decay Rate\"\n      }), \": λ = 0.02 (moderate decay)\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Behavior\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Vectors begin compressing when f \u003c 0.7\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Summary starts condensing\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Still readily accessible\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Balanced performance\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Example\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Memory accessed a few days ago\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Last seen: 4 days ago, salience: 0.55\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: WARM\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: May be compressed if decay factor drops\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"Cold Memories (Archived)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Criteria\"\n      }), \": Old AND low salience\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Doesn't meet hot or warm criteria\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Decay Rate\"\n      }), \": λ = 0.05 (fast decay)\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Behavior\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Heavy compression when f \u003c 0.7\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Fingerprinting when f \u003c cold_threshold (default 0.25-0.3)\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Minimal storage footprint\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Can be regenerated on access\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Example\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Old memory rarely accessed\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Last seen: 45 days ago, salience: 0.18\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: COLD\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: Fingerprinted to 32d, summary reduced to keywords\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Decay Formula\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The decay factor determines memory transformation:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"f = exp(-λ × dt / (salience + 0.1))\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Where:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"λ\"\n        }), \" = Tier-specific decay constant (0.005/0.02/0.05)\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"dt\"\n        }), \" = Time elapsed in days since last access\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"salience\"\n        }), \" = Current memory strength (0-1), boosted by coactivations\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Salience Calculation\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"salience = clamp((base_salience × (1 + ln(1 + coactivations))), 0, 1)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Salience increases logarithmically with access count, preventing unbounded growth.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"New Salience After Decay\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"new_salience = clamp(salience × f, 0, 1)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Compression Mechanics\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Vector Compression\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When decay factor \", _jsx(_components.code, {\n        children: \"f \u003c 0.7\"\n      }), \", vectors are compressed:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Original vector: 1536 dimensions\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Decay factor: f = 0.6\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Target dimensions: floor(1536 × 0.6) = 922 dimensions\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Compression via pooling\"\n        }), \"\\nbucket_size = ceil(original_dim / target_dim)\\ncompressed_vec = [mean(vec[i:i+bucket_size]) \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"for\"\n        }), \" i \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"in\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"range\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"len\"\n        }), \"(vec), bucket_size)]\\nnormalized = normalize(compressed_vec)\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Compression Limits\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Minimum\"\n        }), \": 64 dimensions\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Maximum\"\n        }), \": Original dimensions (256/384/1536 based on \", _jsx(_components.code, {\n          children: \"OM_TIER\"\n        }), \")\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Example\"\n      }), \": 1536d → 922d → 614d → 384d → 256d → 128d → 64d (min)\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Summary Compression\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Summaries compress in layers based on decay factor:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" f \u003e \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.8\"\n        }), \":\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Light compression - truncate\"\n        }), \"\\n    summary = original[:\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"200\"\n        }), \"] + \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"...\\\"\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"elif\"\n        }), \" f \u003e \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.4\"\n        }), \":\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Medium compression - extractive summary\"\n        }), \"\\n    summary = top_sentences(original, \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"3\"\n        }), \")[:\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"80\"\n        }), \"]\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"else\"\n        }), \":\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Heavy compression - keywords only\"\n        }), \"\\n    summary = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\" \\\"\"\n        }), \".join(top_keywords(original, \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"5\"\n        }), \"))\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Fingerprinting\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When \", _jsx(_components.code, {\n        children: \"f \u003c cold_threshold\"\n      }), \" (default 0.25-0.3), memories are fingerprinted:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Create minimal representation\"\n        }), \"\\nfingerprint_vector = hash_to_vec(\", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"id\"\n        }), \" + summary, \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"32\"\n        }), \")  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 32 dimensions\"\n        }), \"\\nfingerprint_summary = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\" \\\"\"\n        }), \".join(top_keywords(content, \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"3\"\n        }), \"))  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 3 keywords\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Replace full memory\"\n        }), \"\\nupdate_vector(\", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"id\"\n        }), \", fingerprint_vector)\\nupdate_summary(\", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"id\"\n        }), \", fingerprint_summary)\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Fingerprinted memories occupy minimal space but can be regenerated when accessed.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Practical Examples\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Example 1: Hot Memory Lifecycle\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 0: Add important memory\"\n        }), \"\\nom.add(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Critical API authentication flow uses JWT tokens\\\"\"\n        }), \")\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: HOT (salience=0.8, coactivations=0)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: 1536d full resolution\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 2: Query increases coactivations\"\n        }), \"\\nom.query(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"authentication\\\"\"\n        }), \")  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Match found\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: HOT (salience=0.85, coactivations=1, last_seen=now)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# λ = 0.005, decay factor f ≈ 0.99\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: Still 1536d\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 10: Another query\"\n        }), \"\\nom.query(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"JWT tokens\\\"\"\n        }), \")  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Match found\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: HOT (salience=0.90, coactivations=2, last_seen=now)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: 1536d (maintained by hot status)\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Result: Stays hot through regular access\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Example 2: Warm Memory Decay\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 0: Add general information\"\n        }), \"\\nom.add(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Python supports list comprehensions for concise iteration\\\"\"\n        }), \")\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: WARM (salience=0.6, coactivations=0)\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 5: No access, decaying\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# λ = 0.02, dt = 5 days\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# f = exp(-0.02 × 5 / (0.6 + 0.1)) ≈ 0.87\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# new_salience = 0.6 × 0.87 = 0.522\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: WARM\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: 1536d (f \u003e 0.7, no compression yet)\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 12: More decay\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# dt = 12 days\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# f = exp(-0.02 × 12 / (0.522 + 0.1)) ≈ 0.70\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# new_salience = 0.522 × 0.70 = 0.365\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: WARM\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: 1536d (just at threshold)\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 20: Compression begins\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# dt = 20 days\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# f = exp(-0.02 × 20 / (0.365 + 0.1)) ≈ 0.46\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# new_salience = 0.365 × 0.46 = 0.168\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: COLD (salience \u003c 0.4, old)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: Compressed to ~700d (1536 × 0.46)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Summary: Compressed to keywords\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Example 3: Cold Memory Fingerprinting\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 0: Add session context\"\n        }), \"\\nom.add(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"User debugging timeout issue in production\\\"\"\n        }), \", salience=\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.5\"\n        }), \")\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: WARM\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Day 45: Long time, no access\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# λ = 0.05 (cold), dt = 45 days\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# f = exp(-0.05 × 45 / (0.5 + 0.1)) ≈ 0.0055\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# new_salience = 0.5 × 0.0055 = 0.0027\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Status: COLD\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# f \u003c 0.25 → FINGERPRINT\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Vector: 32d fingerprint (minimal)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Summary: \\\"user debug timeout\\\"\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Storage: ~95% reduced\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Later: User queries \\\"timeout issues\\\"\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Match found in fingerprint\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# on_query_hit() triggered\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# → Regenerate full embedding from original content\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# → Restore to WARM status\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# → salience boosted to 0.5 + 0.5 = 1.0\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Reinforcement and Regeneration\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Automatic Reinforcement on Query\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When \", _jsx(_components.code, {\n        children: \"OM_DECAY_REINFORCE_ON_QUERY=true\"\n      }), \" (default), matched memories are reinforced:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Query matches a memory\"\n        }), \"\\nresults = om.query(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"authentication flow\\\"\"\n        }), \")\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# For each match, automatic reinforcement:\"\n        }), \"\\nnew_salience = \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"min\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.0\"\n        }), \", current_salience + \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.5\"\n        }), \")\\nlast_seen_at = now()\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Example:\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Before: salience = 0.35 (cold)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# After:  salience = 0.85 (hot again!)\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This prevents useful memories from fading away.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Regeneration on Access\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When \", _jsx(_components.code, {\n        children: \"OM_REGENERATION_ENABLED=true\"\n      }), \" (default), fingerprinted memories regenerate:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Memory is fingerprinted (32d vector, keyword summary)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# User queries and matches fingerprint\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Automatic regeneration:\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 1. Extract original content from database\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 2. Generate full embedding (256d/384d/1536d)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 3. Replace fingerprint with full vector\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 4. Boost salience significantly\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# 5. Update last_seen_at\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Result: Memory restored to full fidelity\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Manual Reinforcement\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Explicitly reinforce important memories:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Reinforce specific memory\"\n        }), \"\\nom.reinforce(memory_id=\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"mem_123\\\"\"\n        }), \")\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Backend applies reinforcement formula:\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# new_salience = min(1.0, old_salience + boost_amount)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# where boost_amount is typically 0.2-0.5\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Environment Configuration\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Control decay behavior via environment variables:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Decay threads for parallel processing\"\n        }), \"\\nOM_DECAY_THREADS=3\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Cold threshold for fingerprinting (0.0-1.0)\"\n        }), \"\\nOM_DECAY_COLD_THRESHOLD=0.25\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Auto-reinforce on query matches\"\n        }), \"\\nOM_DECAY_REINFORCE_ON_QUERY=\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Regenerate fingerprinted memories on access\"\n        }), \"\\nOM_REGENERATION_ENABLED=\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Max vector dimensions before compression\"\n        }), \"\\nOM_MAX_VECTOR_DIM=1536\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Min vector dimensions after compression\"\n        }), \"\\nOM_MIN_VECTOR_DIM=64\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Summary compression layers (1-3)\"\n        }), \"\\nOM_SUMMARY_LAYERS=3\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Decay batch ratio (portion of memories to decay per cycle)\"\n        }), \"\\nOM_DECAY_RATIO=0.03\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Sleep between segment processing (ms)\"\n        }), \"\\nOM_DECAY_SLEEP_MS=200\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Base tier dimensions (affects max compression)\"\n        }), \"\\nOM_TIER=hybrid  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# fast=256d, smart=384d, deep=1536d, hybrid=256d+BM25\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"See \", _jsx(_components.a, {\n        href: \"/docs/advanced/environment-variables\",\n        children: \"Environment Variables\"\n      }), \" for full reference.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Decay Process Lifecycle\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Periodic Decay Cycle\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Runs every OM_DECAY_INTERVAL_MINUTES (default 1440 = 24 hours)\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1.\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Check\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" queries are \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"active\"\n        }), \" (skip \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" active_q \u003e \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \")\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"2.\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Check\"\n        }), \" cooldown \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"period\"\n        }), \" (skip \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" \u003c 60s since last decay)\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"3.\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"For\"\n        }), \" each memory \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"segment\"\n        }), \":\\n   a. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Load\"\n        }), \" batch \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"of\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"memories\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OM_DECAY_RATIO\"\n        }), \" × segment_size)\\n   b. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Classify\"\n        }), \" each into hot/warm/cold tier\\n   c. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Calculate\"\n        }), \" decay factor f = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"exp\"\n        }), \"(-λ × dt / (salience + \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.1\"\n        }), \"))\\n   d. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Apply\"\n        }), \" salience \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"decay\"\n        }), \": new_salience = salience × f\\n   e. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"If\"\n        }), \" f \u003c \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0.7\"\n        }), \": compress vector and summary\\n   f. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"If\"\n        }), \" f \u003c \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"cold_threshold\"\n        }), \": fingerprint memory\\n   g. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Update\"\n        }), \" database \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"with\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" values\\n   h. \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Sleep\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"OM_DECAY_SLEEP_MS\"\n        }), \" between segments\\n\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"4.\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Log\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"statistics\"\n        }), \": processed, changed, compressed, fingerprinted\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Batch Processing\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Decay processes memories in batches\"\n        }), \"\\nbatch_size = floor(segment_size × OM_DECAY_RATIO)  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# e.g., 3% per cycle\"\n        }), \"\\nrandom_start = random(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", segment_size - batch_size)\\nbatch = memories[random_start:random_start + batch_size]\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Distribute across threads\"\n        }), \"\\nthreads = OM_DECAY_THREADS (default: \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"3\"\n        }), \")\\nper_thread = batch_size / threads\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Parallel processing for performance\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" Promise.\", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"all\"\n        }), \"(threads.\", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"map\"\n        }), \"(process_batch))\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This ensures decay doesn't overload the system.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Monitoring Decay\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Decay Logs\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Watch decay process in action:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Typical decay cycle output\"\n        }), \"\\n[decay-2.0] 87/2891 | tiers: hot=342 warm=1456 cold=1093 | compressed=12 fingerprinted=3 | 1247.3ms across 15 segments\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Interpretation\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"87/2891\"\n        }), \": 87 memories changed out of 2891 processed\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"hot=342\"\n        }), \": 342 memories in hot tier\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"warm=1456\"\n        }), \": 1456 memories in warm tier\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"cold=1093\"\n        }), \": 1093 memories in cold tier\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"compressed=12\"\n        }), \": 12 vectors compressed\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"fingerprinted=3\"\n        }), \": 3 memories fingerprinted\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"1247.3ms\"\n        }), \": Processing time\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"15 segments\"\n        }), \": Memory segments processed\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Query-Time Reinforcement Logs\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# When memory is accessed\"\n        }), \"\\n[decay-2.0] regenerated/reinforced memory mem_abc123def456\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Indicates automatic regeneration or reinforcement occurred.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Best Practices\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Trust the Tiered System\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The hot/warm/cold classification is automatic and intelligent:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Don't manually set decay_lambda on individual memories\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# The tier system handles it automatically based on:\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# - Recency (last_seen_at)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# - Activity (coactivations)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# - Importance (salience)\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Configure Thresholds Appropriately\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Adjust based on your use case:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Long-term knowledge base\"\n        }), \"\\nOM_DECAY_COLD_THRESHOLD=0.15  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Keep more memories unfingerpinted\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Short-term cache\"\n        }), \"\\nOM_DECAY_COLD_THRESHOLD=0.35  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Aggressive fingerprinting\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Balanced (default)\"\n        }), \"\\nOM_DECAY_COLD_THRESHOLD=0.25\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Enable Reinforcement\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Keep useful memories alive:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Recommended for all use cases\"\n        }), \"\\nOM_DECAY_REINFORCE_ON_QUERY=\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Prevents frequently queried memories from fading\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Monitor Tier Distribution\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Check if distribution matches your use case:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-python\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Get stats\"\n        }), \"\\nstats = om.get_stats()\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Check tier distribution in logs\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Healthy distribution example:\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# hot=20% (active recent memories)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# warm=50% (generally accessible)\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# cold=30% (archived but retrievable)\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Adjust OM_DECAY_COLD_THRESHOLD if needed\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Tune Compression Aggressiveness\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Control storage vs. fidelity tradeoff:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Preserve more fidelity\"\n        }), \"\\nOM_MIN_VECTOR_DIM=128  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Compress less aggressively\"\n        }), \"\\nOM_SUMMARY_LAYERS=3    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# More detailed summaries\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Maximize storage savings\"\n        }), \"\\nOM_MIN_VECTOR_DIM=64   \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Compress more\"\n        }), \"\\nOM_SUMMARY_LAYERS=1    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"# Minimal summaries\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Next Steps\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Understand \", _jsx(_components.a, {\n          href: \"/docs/concepts/hmd-v2\",\n          children: \"HSG Architecture in HMD v2\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Learn about \", _jsx(_components.a, {\n          href: \"/docs/concepts/sectors\",\n          children: \"Brain Sectors\"\n        }), \" and sector-specific decay\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Explore \", _jsx(_components.a, {\n          href: \"/docs/api/reinforce\",\n          children: \"Reinforcement API\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Configure \", _jsx(_components.a, {\n          href: \"/docs/advanced/environment-variables\",\n          children: \"Environment Variables\"\n        })]\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["concepts","decay"]},"buildId":"B4NA5nCGTllebOHsFva8z","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>