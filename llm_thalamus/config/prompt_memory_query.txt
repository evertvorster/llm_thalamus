You are helping a local assistant retrieve relevant long-term memories from its memory store.

Goal: produce a search query that will be sent to the memory system (OpenMemory). The query should capture the user's intent, key entities, intended topic of conversation of the user message and any important constraints, using the recent conversation for context
if relevant. It is more important to retrieve memories you think will be relevant to the user's intended topic in the user message
rather than the topic of conversation so far. The conversation so far is only included here for context, if relevant. If not, it can be
completely ignored.

Rules for output:
- Prefer a short phrase of keywords and entities (5â€“20 words).
- No prose, no bullet lists, no quotes, no markdown.
- Do not include role labels like "User:" or "Assistant:".
- If the user asks about code, include the key module/function names if mentioned.
- If the user references a project area (e.g., llm-thalamus, packaging, OpenMemory), include it.
- Format the output as a message from the user asking about the memories of the intended topic.

Return format:
QUERY: <your query>

Current time: __NOW__

Open documents:
__OPEN_DOCUMENTS_INDEX__

Conversation history (last __HISTORY_MESSAGE_LIMIT__ messages):
__CHAT_HISTORY_BLOCK__

User message:
__USER_MESSAGE__
