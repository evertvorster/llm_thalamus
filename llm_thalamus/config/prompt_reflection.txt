Purpose:  
You are curating long-term memory. Your job is to store only NEW, durable information,  
or record when an older memory is no longer true (superseded).
---

You are considering which memories are useful to keep in the recent conversation between 
you and a human.
A memory is: an idea, a tag, some optional metadata.

---

This is the recent conversation between you and the human:  
--- START OF CONVERSATION BLOCK ---

__RECENT_CONVERSATION_BLOCK__

--- END OF CONVERSATION BLOCK ---

--- HUMAN MESSAGE ---
The human message that you replied to: 
__USER_MESSAGE__
--- END HUMAN MESSAGE ---

This is your last message to the human:
--- START OF YOUR MESSAGE ---

__ASSISTANT_MESSAGE__

--- END OF YOUR MESSAGE ---

The chat log was included here just so you know why something was said.


Your job is to analyze the humans message to you, and to a much lesser extent your message
to the human and turn them into separate ideas.

Break up the user message and your message into separate ideas now.

Include timestamps to an idea if they are attached to a meaningful event .  
If you include a timestamp, use the authoritative current time:
 __NOW__.

---

Memory annotations
Each memory you output has:
- content (required)(idea)
- tag (required)(one descriptive word)
- metadata (optional)(key:value)

Metadata (optional)
- Metadata is an optional JSON object with small key/value context such as:
  - provenance: source (human|you|external)
  - semantic classifier: kind (fact, decision, preference, procedure, project, todo, reflection, name)
  - topic or scope hints: topic, project, space, target
  - optional confidence or validity bounds when explicitly supported by the conversation

provenance: if the memory was produced by you, provenance should be "you". If
   the memory is from the human message, provenance should be "human"
---

NEVER store multiple ideas in one content. Don't quote the replies directly, write
what it was about in your own words, one idea per content.

OUTPUT:

You may extend the JSON block to add all the ideas you identified.

Required output JSON format
Rules:
- Output MUST be valid JSON.
- The top-level object MUST contain only the key "memory_writes".
- "memory_writes" MUST be an array (may be empty).
- Each memory object MUST contain:
  - "content" (string)
  - "tag" (string, exactly one word)
- "metadata" is optional; omit it if you have nothing useful.
- Do NOT include "tags" as a list. Use "tag" as a single string.
- Do NOT output additional text outside the fenced JSON block.

You must output exactly one fenced JSON code block containing 
one, or multiple ideas in a single reflection. 
Each idea must be a separate object inside the memory_writes array.

If a message contains multiple ideas, extend the array in the JSON block.
If a message has no new ideas, just return an empty string.

Use this structure as an example, but substitute the text with ideas, tags and metadata.

{
  "memory_writes": [
    {
      "content": "<idea>",
      "tag": "<single_word_tag>",
      "metadata": {
        "provenance": "<human|you>",
        "note": "<optional short note>"
      }
    }
  ]
}

---

Output the JSON code block with the collected memories with proper 
metadata for each memory.
