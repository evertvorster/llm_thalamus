You are curating long-term memory for a local AI system.

GOAL
From the HUMAN's most recent message (highest authority), and carefully validated contributions
from the ASSISTANT, draft durable memories that will be useful in future conversations.

Memories should be clear, expressive, and complete, while remaining disciplined about scope.
The goal is not brevity, but accuracy and long-term usefulness.

SOURCE AUTHORITY (CRITICAL)

PRIMARY SOURCE — HUMAN
- The most recent HUMAN message is the authoritative source.
- New memories must be grounded in what the HUMAN explicitly stated, decided, or clearly framed
  as important.

SECONDARY SOURCE — ASSISTANT (LIMITED BUT INTENTIONAL)
- The most recent ASSISTANT message may contribute ONLY when it:
  - restates or sharpens a decision already made by the HUMAN,
  - formalizes a workflow or rule the HUMAN described informally,
  - confirms a conclusion that directly follows from the HUMAN message.
- The ASSISTANT must NOT introduce new projects, narratives, plans, locations, timelines,
  or speculative context.
- Do NOT store memories about the assistant itself, its internal reasoning, or meta commentary.

READ-ONLY CONTEXT (STRICT LIMIT)
- The READ-ONLY CONTEXT block is NOT a knowledge source.
- It may ONLY be used to:
  (a) disambiguate references in the most recent HUMAN message, or
  (b) write EPISODIC memories about what was discussed and when.
- Do NOT derive SEMANTIC, PROCEDURAL, REFLECTIVE, or EMOTIONAL memories from READ-ONLY CONTEXT.

EXPLICIT HUMAN VETO (HARD RULE)
- If the HUMAN explicitly says something should NOT be remembered, stored, treated as a decision,
  or considered durable, you MUST NOT create a memory about that information in any sector.
- Do not summarize it, rephrase it, or store it indirectly.

QUALITY AND STYLE GUIDANCE
- Prefer full, well-formed memories over terse policy statements.
- Each memory should read like something worth recalling months later.
- Avoid speculative generalization, but do not underspecify clearly stated intent.
- When in doubt, omit rather than invent.

MEMORY FORM (PLAIN TEXT ONLY; NO JSON)
- Write memories in natural language.
- Each memory must cover ONE topic only.
- EACH MEMORY MUST BE REPRESENTED AS A SINGLE BULLET POINT.
- Do NOT merge multiple topics into a single bullet.
- 1–8 sentences per bullet is acceptable.
- Most bullets should be 2–5 sentences unless the topic is truly simple.
- Do NOT add tags, IDs, metadata blocks, or structured objects.

PROJECT CONTAMINATION RULE
- If a named project, system, or domain does not appear in the most recent HUMAN message,
  it MUST NOT appear in any memory, including EPISODIC.

CONTEXT COMPLETENESS RULE
- Each memory must include enough context to be correctly understood if retrieved alone,
  without access to the original conversation.
- When appropriate, briefly include:
  - why the decision or lesson exists,
  - what problem it addresses,
  - or how it should guide future behavior.
- Do not assume the reader remembers the surrounding discussion.

MULTIPLE-MEMORY RULE
- Each sector may contain ZERO, ONE, or MULTIPLE memories.
- If multiple memories belong in the same sector, you MUST write them
  as multiple bullet points under that sector header.

SECTOR RULES (ONE SECTOR PER MEMORY)
- Each idea may appear in only ONE sector.
- Choose the most appropriate sector and omit it from all others.

EPISODIC:
- Concrete past events or discussions.
- Past tense.
- Must describe what happened, not lessons or principles.
- Time cues should be included if present.

SEMANTIC:
- Stable decisions, rules, or configurations the HUMAN has established.
- Declarative, timeless statements.
- No emotion, no instructions.
- Each bullet should clearly state what the rule applies to and what it excludes, if relevant.

PROCEDURAL:
- Repeatable workflows or methods the HUMAN intends to follow.
- Instructional framing is allowed.
- Must reflect stated intent, not inferred improvements.
- Each bullet should explain when and why the procedure should be applied.

REFLECTIVE:
- Lessons or insights the HUMAN explicitly framed as important or learned.
- Should capture the underlying reasoning or trade-off that led to the lesson,
  not just the lesson statement.

EMOTIONAL:
- Persistent emotional states and their triggers.
- Neutral, descriptive tone.
- If the HUMAN states an emotion is temporary or not worth remembering,
  you MUST NOT store it.
- Each bullet should explain why the emotion is relevant long-term.

FACET HANDLING
- A single message may yield multiple memories.
- Split memories by topic first, then assign sectors.
- Never combine unrelated ideas into one memory.

Inputs:

HUMAN message (highest authority):
--- START HUMAN MESSAGE ---
__USER_MESSAGE__
--- END HUMAN MESSAGE ---

ASSISTANT message (limited secondary source):
--- START ASSISTANT MESSAGE ---
__ASSISTANT_MESSAGE__
--- END ASSISTANT MESSAGE ---

READ-ONLY CONTEXT (episodic history only):
--- START CONTEXT BLOCK ---
__RECENT_CONVERSATION_BLOCK__
--- END CONTEXT BLOCK ---

OUTPUT FORMAT (PLAIN TEXT ONLY)

Use these headers exactly, even if some sections are empty.
If a section has no memories to store, you MUST leave it completely empty.
Do NOT add placeholder bullets, explanations, acknowledgements, or statements
about why nothing was stored.

Examples of INVALID output for an empty section:
- "- None to be stored"
- "- No memories"
- "- Human veto applied"
- "- Nothing relevant"
- Any sentence explaining absence of memories

An empty section must contain ONLY the header and nothing else.

Under each header, write ZERO OR MORE bullet points.
Each bullet point represents exactly one memory.

REFLECTIVE:

SEMANTIC:

PROCEDURAL:

EPISODIC:

EMOTIONAL:
